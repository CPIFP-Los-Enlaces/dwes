<!doctype html>
<html lang="es" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.88.1" /><link rel="canonical" type="text/html" href="https://lmorillas.github.io/dwes/docs/">
<link rel="alternate" type="application/rss&#43;xml" href="https://lmorillas.github.io/dwes/docs/index.xml">
<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link rel="shortcut icon" href="/dwes/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/dwes/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/dwes/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/dwes/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/dwes/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/dwes/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/dwes/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/dwes/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/dwes/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/dwes/favicons/android-192x192.png" sizes="192x192">

<title>Recursos | Desarrollo Web Entorno Servidor</title>


  
  <meta name="description" content="


Sitio en construcción



">
<meta property="og:title" content="Recursos" />
<meta property="og:description" content="Documentación Módulo DAW" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://lmorillas.github.io/dwes/docs/" /><meta property="og:site_name" content="Desarrollo Web Entorno Servidor" />

<meta itemprop="name" content="Recursos">
<meta itemprop="description" content="Documentación Módulo DAW"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Recursos"/>
<meta name="twitter:description" content="Documentación Módulo DAW"/>




<link rel="preload" href="/dwes/scss/main.min.93be7723579b79373235edba63b64ec3a477823ef01c6ac9507f2157d195802f.css" as="style">
<link href="/dwes/scss/main.min.93be7723579b79373235edba63b64ec3a477823ef01c6ac9507f2157d195802f.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>










  </head>
  <body class="td-section">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/dwes/">
		<span class="navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="text-uppercase font-weight-bold">Desarrollo Web Entorno Servidor</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link active" href="/dwes/docs/" ><span class="active">Recursos</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
Versión imprimible multipagina.
<a href="#" onclick="print();return false;">Haga click aquí para imprimir</a>.
</p><p>
<a href="/dwes/docs/">Volver a la vista normal de esta página</a>.
</p>
</div>



<h1 class="title">Recursos</h1>





    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-e497a357a862a5593c92eae5b1e0fba3">Presentación</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>2: <a href="#pg-1a9086e5c74884023805838e659a09e1">Generadores de Sitios Estáticos</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>2.1: <a href="#pg-7dde359c74d32646ed75feae3f82c2b6">Primera tarea</a></li>


    
  
    
    
	
<li>2.2: <a href="#pg-bdcab6232099af70334e4403f4ad51b4">Segunda tarea</a></li>


    
  
    
    
	
<li>2.3: <a href="#pg-a1cdf8999a1eb166cfac4869b30ae9a2">Cómo añadir contenido</a></li>


    
  
    
    
	
<li>2.4: <a href="#pg-42d2781871bda073e81ead9a376e3468">Plantillas</a></li>


    
  
    
    
	
<li>2.5: <a href="#pg-24831692153d2ad6881121b6fcdf7124">Shortcodes</a></li>


    
  
    
    
	
<li>2.6: <a href="#pg-0202dfd47ec634a5dd6a41e0ad63ab0c">Trabajo con datos</a></li>


    
  
    
    
	
<li>2.7: <a href="#pg-a7304746b15ac94e89fac1751b4a0239">Búsqueda de páginas</a></li>


    
  
    
    
	
<li>2.8: <a href="#pg-bb37aa76c1122855eaad534ad2f4aba9">Inserción de formularios dinámicos</a></li>


    
  
    
    
	
<li>2.9: <a href="#pg-d98f5ba25f6c7aac1692d69ab2d588b7">Algunas notas de repaso</a></li>


    
  
    
    
	
<li>2.10: <a href="#pg-09be1c9d92839611ca50ed89286c80ea">Configuración GDPR</a></li>


    
  

    </ul>
    
  
    
    
	
<li>3: <a href="#pg-65fa7948f76f2ce62365a1ccd185ebec">Inmersión en Python</a></li>


    
    <ul>
        
  
  
  
  

  

    </ul>
    
  
    
    
	
<li>4: <a href="#pg-970191280c282b0d06b36c39f701f000">Django</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>4.1: <a href="#pg-e59ea48a29e5573048bff80b7d69ac7b">Instalación</a></li>


    
  
    
    
	
<li>4.2: <a href="#pg-7689592482baf6e198edc0b9f14914ad">Creación de un proyecto y una app</a></li>


    
  
    
    
	
<li>4.3: <a href="#pg-f7ec2ca618dc22ad79a654aabf33d978">Introducción a HTTP</a></li>


    
  
    
    
	
<li>4.4: <a href="#pg-d3a66753eac6c7801654aa2420407c19">Modelos</a></li>


    
  
    
    
	
<li>4.5: <a href="#pg-3bc118b9dddd3032235e752834004a2d">Sitio administrativo</a></li>


    
  
    
    
	
<li>4.6: <a href="#pg-f7a2a66d2c290e27da8655c9d9e80be3">Página inicial</a></li>


    
  
    
    
	
<li>4.7: <a href="#pg-7250eee326209f21f0e0ceb59b26cbf0">Ejercicios repaso y profundización</a></li>


    
  
    
    
	
<li>4.8: <a href="#pg-92f0298c6cf4c606d64aacf60fadb74e">Vistas genéricas: listados y detalle</a></li>


    
  
    
    
	
<li>4.9: <a href="#pg-4aea6c81708952e0ccec3bafb3801a6d">Formularios</a></li>


    
  
    
    
	
<li>4.10: <a href="#pg-93c163464508e198441e4f1b5692bcef">Formularios - Crispy</a></li>


    
  
    
    
	
<li>4.11: <a href="#pg-71d1aa01c08df445ed6924d82d558a11">Sesiones</a></li>


    
  
    
    
	
<li>4.12: <a href="#pg-8784277a302316f7bd7cd79cc3d15542">Autenticación y permisos</a></li>


    
  
    
    
	
<li>4.13: <a href="#pg-5a2cce7f0df84a85e1d26ffd7785cd94">Subida de archivos</a></li>


    
  
    
    
	
<li>4.14: <a href="#pg-11c7d65af1cf9722ba5d6add2a60854e">Archivos estáticos</a></li>


    
  
    
    
	
<li>4.15: <a href="#pg-ddcdd7458633b63ecc0739d89af5e8a9">Uso de mapas</a></li>


    
  

    </ul>
    
  
    
    
	
<li>5: <a href="#pg-6a416270f7839d15dc8483f60543b361">Django2</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>5.1: <a href="#pg-ecfa9bd0a552fd87dacbb41e693471e4">Generación de archivos CSV</a></li>


    
  
    
    
	
<li>5.2: <a href="#pg-50f59551a2b6a256d2f76ab89658f0cc">Salida JSON</a></li>


    
  
    
    
	
<li>5.3: <a href="#pg-6c455beabe79b76ddb0f7bf19ee1ed69">Tests</a></li>


    
  
    
    
	
<li>5.4: <a href="#pg-57a32f787f80d6d30f7e8555fbdf302c">Copias de seguridad</a></li>


    
  
    
    
	
<li>5.5: <a href="#pg-e90d515c257a37967f1f0bd062aaf89e">Postgresql</a></li>


    
  
    
    
	
<li>5.6: <a href="#pg-6e3579981685f703c3ce642bc7464faa">Utilidades</a></li>


    
  

    </ul>
    
  
    
    
	
<li>6: <a href="#pg-e65c771e2f8bbed1c3203d175a349f92">Proyectos</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>6.1: <a href="#pg-805220f211a9bbec693b373a3e7b3e5b">Proyecto Django - Primer trimestre</a></li>


    
  
    
    
	
<li>6.2: <a href="#pg-d9e5431301d222bf85258c44b7066df4">Centros Educativos de Aragón</a></li>


    
  

    </ul>
    
  
    
    
	
<li>7: <a href="#pg-62136566f85dfce3c1ff04c7bfce8269">Prácticas</a></li>


    
    <ul>
        
  
  
  
  

  
    
    
	
<li>7.1: <a href="#pg-945d7fcaf73612753824763620a862f3">Migración del proyecto de Django de sqlite a Postgresql</a></li>


    
  

    </ul>
    
  

    </ul>


<div class="content">
      

<div class="pageinfo pageinfo-primary">
<p>Sitio en construcción</p>

</div>


</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-e497a357a862a5593c92eae5b1e0fba3">1 - Presentación</h1>
    <div class="lead">Presentación del sitio</div>
	

<div class="pageinfo pageinfo-primary">
<p>En construcción</p>

</div>

<h2 id="contenidos">Contenidos</h2>
<h2 id="objetivos">Objetivos</h2>
<h2 id="plan-general-del-curso">Plan general del curso</h2>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-1a9086e5c74884023805838e659a09e1">2 - Generadores de Sitios Estáticos</h1>
    <div class="lead">Introducción a la creación de sitios estáticos con Hugo</div>
	

<div class="pageinfo pageinfo-primary">
<p>Introducción a la generación de sitios web con HUGO</p>

</div>

<h2 id="por-qué-un-generador-de-sitios-estáticos">¿Por qué un generador de sitios estáticos?</h2>
<ul>
<li>Rapidez</li>
<li>Seguridad</li>
<li>Eficiencia</li>
<li>Consistencia de contenidos y formatos</li>
</ul>
<h2 id="instalación">Instalación</h2>
<p>Tiene instaladores para mac, windows y linux:</p>
<ul>
<li><a href="https://gohugo.io/getting-started/quick-start/#step-1-install-hugo">https://gohugo.io/getting-started/quick-start/#step-1-install-hugo</a></li>
</ul>


<div class="pageinfo pageinfo-primary">
<p>Recuerda:</p>
<ul>
<li>Instalar</li>
<li>Configurar el <strong>path</strong> del sistema</li>
</ul>

</div>

<h2 id="primeros-pasos">Primeros pasos</h2>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Crear nuevo sitio</h4>

    

</div>

<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ hugo new site &lt;nombre_del_sitio&gt;
</code></pre></div>

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Crear contenido</h4>

    

</div>

<p>Repaso de sintaxis <strong>markdown</strong>:</p>
<ul>
<li><a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet</a></li>
<li><a href="https://programminghistorian.org/es/lecciones/introduccion-a-markdown">https://programminghistorian.org/es/lecciones/introduccion-a-markdown</a></li>
</ul>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-7dde359c74d32646ed75feae3f82c2b6">2.1 - Primera tarea</h1>
    
	

<div class="pageinfo pageinfo-primary">
<p><strong>Objetivo</strong>: Escritura de texto en markdown</p>
<p>Intenta escribir el siguiente texto en Markdown. Usa un visualizador de <em>visual studio code</em> por ejemplo para ver el resultado.</p>

</div>

<p>Text can be <strong>bold</strong>, <em>italic</em>, or <del>strikethrough</del>. <a href="https://gohugo.io">Links</a> should be blue with no underlines (unless hovered over).</p>
<p>There should be whitespace between paragraphs. Vape migas chillwave sriracha poutine try-hard distillery. Tattooed shabby chic small batch, pabst art party heirloom letterpress air plant pop-up. Sustainable chia skateboard art party banjo cardigan normcore affogato vexillologist quinoa meggings man bun master cleanse shoreditch readymade. Yuccie prism four dollar toast tbh cardigan iPhone, tumblr listicle live-edge VHS. Pug lyft normcore hot chicken biodiesel, actually keffiyeh thundercats photo booth pour-over twee fam food truck microdosing banh mi. Vice activated charcoal raclette unicorn live-edge post-ironic. Heirloom vexillologist coloring book, beard deep v letterpress echo park humblebrag tilde.</p>
<p>90&rsquo;s four loko seitan photo booth gochujang freegan tumeric listicle fam ugh humblebrag. Bespoke leggings gastropub, biodiesel brunch pug fashion axe meh swag art party neutra deep v chia. Enamel pin fanny pack knausgaard tofu, artisan cronut hammock meditation occupy master cleanse chartreuse lumbersexual. Kombucha kogi viral truffaut synth distillery single-origin coffee ugh slow-carb marfa selfies. Pitchfork schlitz semiotics fanny pack, ugh artisan vegan vaporware hexagon. Polaroid fixie post-ironic venmo wolf ramps <strong>kale chips</strong>.</p>
<blockquote>
<p>There should be no margin above this first sentence.</p>
<p>Blockquotes should be a lighter gray with a border along the left side in the secondary color.</p>
<p>There should be no margin below this final sentence.</p>
</blockquote>
<h2 id="first-header-2">First Header 2</h2>
<p>This is a normal paragraph following a header. Knausgaard kale chips snackwave microdosing cronut copper mug swag synth bitters letterpress glossier <strong>craft beer</strong>. Mumblecore bushwick authentic gochujang vegan chambray meditation jean shorts irony. Viral farm-to-table kale chips, pork belly palo santo distillery activated charcoal aesthetic jianbing air plant woke lomo VHS organic. Tattooed locavore succulents heirloom, small batch sriracha echo park DIY af. Shaman you probably haven&rsquo;t heard of them copper mug, crucifix green juice vape <em>single-origin coffee</em> brunch actually. Mustache etsy vexillologist raclette authentic fam. Tousled beard humblebrag asymmetrical. I love turkey, I love my job, I love my friends, I love Chardonnay!</p>
<p>Deae legum paulatimque terra, non vos mutata tacet: dic. Vocant docuique me plumas fila quin afuerunt copia haec o neque.</p>
<p>On big screens, paragraphs and headings should not take up the full container width, but we want tables, code blocks and similar to take the full width.</p>
<p>Scenester tumeric pickled, authentic crucifix post-ironic fam freegan VHS pork belly 8-bit yuccie PBR&amp;B. <strong>I love this life we live in</strong>.</p>
<h2 id="second-header-2">Second Header 2</h2>
<blockquote>
<p>This is a blockquote following a header. Bacon ipsum dolor sit amet t-bone doner shank drumstick, pork belly porchetta chuck sausage brisket ham hock rump pig. Chuck kielbasa leberkas, pork bresaola ham hock filet mignon cow shoulder short ribs biltong.</p>
</blockquote>
<h3 id="header-3">Header 3</h3>
<pre tabindex="0"><code>This is a code block following a header.
</code></pre><p>Next level leggings before they sold out, PBR&amp;B church-key shaman echo park. Kale chips occupy godard whatever pop-up freegan pork belly selfies. Gastropub Belinda subway tile woke post-ironic seitan. Shabby chic man bun semiotics vape, chia messenger bag plaid cardigan.</p>
<h4 id="header-4">Header 4</h4>
<ul>
<li>This is an unordered list following a header.</li>
<li>This is an unordered list following a header.</li>
<li>This is an unordered list following a header.</li>
</ul>
<h5 id="header-5">Header 5</h5>
<ol>
<li>This is an ordered list following a header.</li>
<li>This is an ordered list following a header.</li>
<li>This is an ordered list following a header.</li>
</ol>
<h6 id="header-6">Header 6</h6>
<table>
<thead>
<tr>
<th>What</th>
<th>Follows</th>
</tr>
</thead>
<tbody>
<tr>
<td>A table</td>
<td>A header</td>
</tr>
<tr>
<td>A table</td>
<td>A header</td>
</tr>
<tr>
<td>A table</td>
<td>A header</td>
</tr>
</tbody>
</table>
<hr>
<p>There&rsquo;s a horizontal rule above and below this.</p>
<hr>
<p>Here is an unordered list:</p>
<ul>
<li>Liverpool F.C.</li>
<li>Chelsea F.C.</li>
<li>Manchester United F.C.</li>
</ul>
<p>And an ordered list:</p>
<ol>
<li>Michael Brecker</li>
<li>Seamus Blake</li>
<li>Branford Marsalis</li>
</ol>
<p>And an unordered task list:</p>
<ul>
<li><input checked="" disabled="" type="checkbox"> Create a Hugo theme</li>
<li><input checked="" disabled="" type="checkbox"> Add task lists to it</li>
<li><input disabled="" type="checkbox"> Take a vacation</li>
</ul>
<p>And a &ldquo;mixed&rdquo; task list:</p>
<ul>
<li><input disabled="" type="checkbox"> Pack bags</li>
<li>?</li>
<li><input disabled="" type="checkbox"> Travel!</li>
</ul>
<p>And a nested list:</p>
<ul>
<li>Jackson 5
<ul>
<li>Michael</li>
<li>Tito</li>
<li>Jackie</li>
<li>Marlon</li>
<li>Jermaine</li>
</ul>
</li>
<li>TMNT
<ul>
<li>Leonardo</li>
<li>Michelangelo</li>
<li>Donatello</li>
<li>Raphael</li>
</ul>
</li>
</ul>
<p>Definition lists can be used with Markdown syntax. Definition headers are bold.</p>
<dl>
<dt>Name</dt>
<dd>Godzilla</dd>
<dt>Born</dt>
<dd>1952</dd>
<dt>Birthplace</dt>
<dd>Japan</dd>
<dt>Color</dt>
<dd>Green</dd>
</dl>
<hr>
<p>Tables should have bold headings and alternating shaded rows.</p>
<table>
<thead>
<tr>
<th>Artist</th>
<th>Album</th>
<th>Year</th>
</tr>
</thead>
<tbody>
<tr>
<td>Michael Jackson</td>
<td>Thriller</td>
<td>1982</td>
</tr>
<tr>
<td>Prince</td>
<td>Purple Rain</td>
<td>1984</td>
</tr>
<tr>
<td>Beastie Boys</td>
<td>License to Ill</td>
<td>1986</td>
</tr>
</tbody>
</table>
<p>If a table is too wide, it should scroll horizontally.</p>
<table>
<thead>
<tr>
<th>Artist</th>
<th>Album</th>
<th>Year</th>
<th>Label</th>
<th>Awards</th>
<th>Songs</th>
</tr>
</thead>
<tbody>
<tr>
<td>Michael Jackson</td>
<td>Thriller</td>
<td>1982</td>
<td>Epic Records</td>
<td>Grammy Award for Album of the Year, American Music Award for Favorite Pop/Rock Album, American Music Award for Favorite Soul/R&amp;B Album, Brit Award for Best Selling Album, Grammy Award for Best Engineered Album, Non-Classical</td>
<td>Wanna Be Startin' Somethin', Baby Be Mine, The Girl Is Mine, Thriller, Beat It, Billie Jean, Human Nature, P.Y.T. (Pretty Young Thing), The Lady in My Life</td>
</tr>
<tr>
<td>Prince</td>
<td>Purple Rain</td>
<td>1984</td>
<td>Warner Brothers Records</td>
<td>Grammy Award for Best Score Soundtrack for Visual Media, American Music Award for Favorite Pop/Rock Album, American Music Award for Favorite Soul/R&amp;B Album, Brit Award for Best Soundtrack/Cast Recording, Grammy Award for Best Rock Performance by a Duo or Group with Vocal</td>
<td>Let&rsquo;s Go Crazy, Take Me With U, The Beautiful Ones, Computer Blue, Darling Nikki, When Doves Cry, I Would Die 4 U, Baby I&rsquo;m a Star, Purple Rain</td>
</tr>
<tr>
<td>Beastie Boys</td>
<td>License to Ill</td>
<td>1986</td>
<td>Mercury Records</td>
<td>noawardsbutthistablecelliswide</td>
<td>Rhymin &amp; Stealin, The New Style, She&rsquo;s Crafty, Posse in Effect, Slow Ride, Girls, (You Gotta) Fight for Your Right, No Sleep Till Brooklyn, Paul Revere, Hold It Now, Hit It, Brass Monkey, Slow and Low, Time to Get Ill</td>
</tr>
</tbody>
</table>
<hr>
<p>Code snippets like <code>var foo = &quot;bar&quot;;</code> can be shown inline.</p>
<p>Also, <code>this should vertically align</code> <del><code>with this</code></del> <del>and this</del>.</p>
<p>Code can also be shown in a block element.</p>
<pre tabindex="0"><code>foo := &quot;bar&quot;;
bar := &quot;foo&quot;;
</code></pre><p>Code can also use syntax highlighting.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#204a87;font-weight:bold">func</span> <span style="color:#000">main</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000">input</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#4e9a06">`var foo = &#34;bar&#34;;`</span>

  <span style="color:#000">lexer</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">lexers</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;javascript&#34;</span><span style="color:#000;font-weight:bold">)</span>
  <span style="color:#000">iterator</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">_</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">lexer</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Tokenise</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">nil</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">input</span><span style="color:#000;font-weight:bold">)</span>
  <span style="color:#000">style</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">styles</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;github&#34;</span><span style="color:#000;font-weight:bold">)</span>
  <span style="color:#000">formatter</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">html</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">New</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">html</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">WithLineNumbers</span><span style="color:#000;font-weight:bold">())</span>

  <span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">buff</span> <span style="color:#000">bytes</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Buffer</span>
  <span style="color:#000">formatter</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Format</span><span style="color:#000;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">&amp;</span><span style="color:#000">buff</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">style</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">iterator</span><span style="color:#000;font-weight:bold">)</span>

  <span style="color:#000">fmt</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Println</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">buff</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">String</span><span style="color:#000;font-weight:bold">())</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><pre tabindex="0"><code>Long, single-line code blocks should not wrap. They should horizontally scroll if they are too long. This line should be long enough to demonstrate this.
</code></pre><p>Inline code inside table cells should still be distinguishable.</p>
<table>
<thead>
<tr>
<th>Language</th>
<th>Code</th>
</tr>
</thead>
<tbody>
<tr>
<td>Javascript</td>
<td><code>var foo = &quot;bar&quot;;</code></td>
</tr>
<tr>
<td>Ruby</td>
<td><code>foo = &quot;bar&quot;{</code></td>
</tr>
</tbody>
</table>
<hr>
<p>Small images should be shown at their actual size.</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Picea_abies_shoot_with_buds%2C_Sogndal%2C_Norway.jpg/240px-Picea_abies_shoot_with_buds%2C_Sogndal%2C_Norway.jpg" alt=""></p>
<p>Large images should always scale down and fit in the content container.</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Picea_abies_shoot_with_buds%2C_Sogndal%2C_Norway.jpg/1024px-Picea_abies_shoot_with_buds%2C_Sogndal%2C_Norway.jpg" alt=""></p>
<p><em>The photo above of the Spruce Picea abies shoot with foliage buds: Bjørn Erik Pedersen, CC-BY-SA.</em></p>
<h2 id="components">Components</h2>
<h3 id="alerts">Alerts</h3>
<p>

<div class="alert alert-primary" role="alert">


    This is an alert.

</div>



<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>

    This is an alert with a title.

</div>



<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>

    This is an alert with a title and <strong>Markdown</strong>.

</div>



<div class="alert alert-success" role="alert">


    This is a successful alert.

</div>



<div class="alert alert-warning" role="alert">


    This is a warning.

</div>



<div class="alert alert-warning" role="alert">
<h4 class="alert-heading">Warning</h4>

    This is a warning with a title.

</div>
</p>
<h2 id="another-heading">Another Heading</h2>
<p>Add some sections here to see how the ToC looks like. Bacon ipsum dolor sit amet t-bone doner shank drumstick, pork belly porchetta chuck sausage brisket ham hock rump pig. Chuck kielbasa leberkas, pork bresaola ham hock filet mignon cow shoulder short ribs biltong.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-bdcab6232099af70334e4403f4ad51b4">2.2 - Segunda tarea</h1>
    
	

<div class="pageinfo pageinfo-primary">
<p><strong>Objetivo:</strong> Construcción de un primer sitio sencillo con un tema simple.</p>
<p><strong>Recursos externos:</strong> Tema de hugo <a href="https://github.com/EmielH/tale-hugo">https://github.com/EmielH/tale-hugo</a></p>

</div>

<h2 id="creación-del-sitio">Creación del sitio</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ hugo new site primeros-pasos

Congratulations! Your new Hugo site is created in /home/lm/proyectos/cpilosenlaces/primeros-pasos.

Just a few more steps and you<span style="color:#a40000">&#39;</span>re ready to go:

1. Download a theme into the same-named folder.
   Choose a theme from https://themes.gohugo.io/ or
   create your own with the <span style="color:#4e9a06">&#34;hugo new theme &lt;THEMENAME&gt;&#34;</span> command.
2. Perhaps you want to add some content. You can add single files
   with <span style="color:#4e9a06">&#34;hugo new &lt;SECTIONNAME&gt;/&lt;FILENAME&gt;.&lt;FORMAT&gt;&#34;</span>.
3. Start the built-in live server via <span style="color:#4e9a06">&#34;hugo server&#34;</span>.

Visit https://gohugo.io/ <span style="color:#204a87;font-weight:bold">for</span> quickstart guide and full documentation.

</code></pre></div><p>Estructura creada:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">archetypes
config.toml
content
data
layouts
static
themes
</code></pre></div><h2 id="instalar-tema">Instalar tema</h2>
<blockquote>
<p><a href="https://github.com/EmielH/tale-hugo">https://github.com/EmielH/tale-hugo</a></p>
</blockquote>
<ul>
<li>
<p>Descargar a la carpeta themes. Renombrar la carpeta del tema a <code>tale</code></p>
</li>
<li>
<p>Modificar <code>config.toml</code></p>
<pre tabindex="0"><code> theme = &quot;tale&quot;
</code></pre></li>
</ul>
<h2 id="añadir-contenido">Añadir contenido</h2>
<p>(3 páginas)</p>
<p><code>hugo new contacto.md</code></p>
<h2 id="añadir-3-posts">Añadir 3 posts</h2>
<p><code>$ hugo new posts/esto-es-hugo.md</code></p>
<p>Editar markdown. Una imagen por post por lo menos.</p>
<h3 id="añadir-un-menú">Añadir un menú</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml"><span style="color:#000;font-weight:bold">[</span><span style="color:#000">menu</span><span style="color:#000;font-weight:bold">]</span>
  <span style="color:#000;font-weight:bold">[[</span><span style="color:#000">menu</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">main</span><span style="color:#000;font-weight:bold">]]</span>
	<span style="color:#000">identifier</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;contacto&#34;</span>
	<span style="color:#000">name</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;Contacto&#34;</span>
	<span style="color:#000">title</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;Contacto&#34;</span>
	<span style="color:#000">url</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;/contacto/&#34;</span>
	<span style="color:#000">weight</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">2</span>
  <span style="color:#000;font-weight:bold">[[</span><span style="color:#000">menu</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">main</span><span style="color:#000;font-weight:bold">]]</span>
	<span style="color:#000">identifier</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;posts&#34;</span>
	<span style="color:#000">name</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;Posts&#34;</span>
	<span style="color:#000">title</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;Posts&#34;</span>
	<span style="color:#000">url</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;/posts/&#34;</span>
	<span style="color:#000">weight</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">3</span>
</code></pre></div><h2 id="publicar">Publicar</h2>
<pre tabindex="0"><code>hugo 
</code></pre><h2 id="gh-pages">gh pages</h2>
<p><code>hugo -d docs</code></p>
<p>Modificar <em>config.toml</em></p>
<pre tabindex="0"><code>baseURL = &quot;https://xxxxxxx.github.io/primeros-pasos&quot;
</code></pre><ul>
<li>Crear un repositorio en GitHub</li>
<li>Hacer el commit, para confirmar los cambios del sitio web en tu repositorio local</li>
<li>Asociar el repositorio local con el repositorio remoto que has creado en Github</li>
<li>Sincronizar el contenido del repositorio local hacia remoto</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-a1cdf8999a1eb166cfac4869b30ae9a2">2.3 - Cómo añadir contenido</h1>
    
	

<div class="pageinfo pageinfo-primary">
<p><strong>Objetivo</strong>: Estructurar contenido para mejorar la visualización del sitio.</p>
<p><strong>Documentación:</strong></p>
<ul>
<li><a href="https://gohugo.io/content-management/organization/">https://gohugo.io/content-management/organization/</a></li>
<li></li>
</ul>

</div>

<h2 id="qué-estructura-tiene-el-contenido-de-las-páginas">¿Qué estructura tiene el contenido de las páginas?</h2>
<ul>
<li>Tipos de páginas de contenido. Agrupar las páginas por tipos.</li>
<li>En Hugo el contenido se organiza como luego se va a ver en la web. Anidamos el contenido en subdirectorios (<strong>secciones</strong>): <code>content/&lt;directorios&gt;</code></li>
<li>Pensar en <strong>front-matter</strong> - <strong>archetypes</strong></li>
<li>Plantillas específicas para cada modelo</li>
</ul>
<h2 id="secciones">Secciones</h2>
<p>Se pueden anidar todas las secciones que sean necesarias.</p>
<pre tabindex="0"><code>content
└── blog        &lt;-- Sección, porque es el primer nivel bajo content/    ├── funny-cats
    │   ├── mypost.md
    │   └── kittens         &lt;-- Sección porque contiene _index.md
    │       └── _index.md
    └── tech                &lt;-- Sección porque contiene _index.md
        └── _index.md

</code></pre><p>Por defecto Hugo asume que las páginas pertenecen al <strong>Content Type</strong> de la sección inicial, es decir que <code>posts/post-1.md</code> es de tipo <code>posts</code>. Si existe un <strong>archetype</strong> para la  sección <strong>posts</strong>, hugo generará un <strong>frontmatter</strong> específico. Ver <a href="https://gohugo.io/content-management/archetypes/">archetypes</a></p>
<h2 id="páginas-_indexmd">Páginas <code>_index.md</code></h2>
<ul>
<li>Añaden <strong>front-matter</strong> y contenido a las <strong>list templates</strong></li>
<li>La función <code>.Site.GetPage</code> da acceso a contenido y metadatos.</li>
</ul>
<pre tabindex="0"><code>          url
        ⊢  ^ ⊣
        path    slug
        ⊢--^-⊣⊢---^---⊣
           filepath
        ⊢------^------⊣
content/posts/_index.md
</code></pre><p>Ejemplo de <strong>list.html</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go-html-template" data-lang="go-html-template"><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">define</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;main&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">h2</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Title</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">h2</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">ul</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">range</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Pages</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
        <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">li</span><span style="color:#000;font-weight:bold">&gt;&lt;</span><span style="color:#204a87;font-weight:bold">a</span> <span style="color:#c4a000">href</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">​</span> <span style="color:#a40000">&#34;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.RelPermalink</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#a40000">&#34;​</span> <span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Title</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">a</span><span style="color:#000;font-weight:bold">&gt;&lt;/</span><span style="color:#204a87;font-weight:bold">li</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">end</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
    <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">ul</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">end</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
</code></pre></div><h2 id="páginas-normales-en-secciones">Páginas normales en secciones</h2>
<ul>
<li>Se muestran conlas <strong>single page templates</strong></li>
</ul>
<h2 id="explicación-de-las-rutas">Explicación de las rutas</h2>
<ul>
<li>filename</li>
<li>slug</li>
<li>section</li>
<li>type</li>
<li>url</li>
</ul>
<p>Se pueden modificar en el <strong>frontmatter</strong>: <code>slug, type y url</code></p>
<h2 id="front-matter">Front Matter</h2>
<ul>
<li>Lo que precede al contenido</li>
<li>Sintaxis especial</li>
<li>Hay unas variables predefinidas pero el usuario puede crear nuevas.</li>
<li>Se genera según el <strong>archetype</strong> de la sección. Por defecto <em>_default.md</em></li>
<li>Se pueden pasar valores por defecto a las páginas que descienden de una sección.</li>
</ul>
<p>Por ejemplo si ponemos en <code>content/blog/_index.md</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml"><span style="color:#000">title</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;Blog&#39;</span>
<span style="color:#000;font-weight:bold">[</span><span style="color:#000">cascade</span><span style="color:#000;font-weight:bold">]</span>
  <span style="color:#000">banner</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;images/typewriter.jpg&#39;</span>
</code></pre></div><p>Esta página y todas las que descienden de la sección <code>blog</code> devuelven <code>images/typewriter.jpg</code> en <code>.Params.banner</code> a no ser que tengan su propio banner o un ancestro más cercano lo modifique.</p>
<h3 id="documentación-relacionada">Documentación relacionada:</h3>
<ul>
<li><a href="https://gohugo.io/content-management/front-matter/">https://gohugo.io/content-management/front-matter/</a></li>
<li><a href="https://gohugo.io/variables/page/">https://gohugo.io/variables/page/</a></li>
</ul>
<h2 id="taxonomías">Taxonomías</h2>
<p><a href="https://gohugo.io/content-management/taxonomies">https://gohugo.io/content-management/taxonomies</a></p>
<p>Una taxonomía es una categorización que nos permite clasificar contenido.</p>
<p>Por ejemplo, en una web de Películas podríamos tener actores, directores, estudios, géneros, años, premios &hellip;</p>
<p>Por defecto Hugo añade las taxonomías <strong>categories</strong> y <strong>tags</strong>. Se pueden añadir más en <strong>config</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml"><span style="color:#000;font-weight:bold">[</span><span style="color:#000">taxonomies</span><span style="color:#000;font-weight:bold">]</span>
  <span style="color:#000">category</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;categories&#39;</span>
  <span style="color:#000">tag</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;tags&#39;</span>
</code></pre></div><p>Si se quiere deshabilitar:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml"><span style="color:#000">disableKinds</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;taxonomy&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;term&#39;</span><span style="color:#000;font-weight:bold">]</span>
</code></pre></div><p>En <strong>frontmatter</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#204a87;font-weight:bold">categories</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#000">Personal</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#000">Trabajo</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">tags</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#000">software</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span>- <span style="color:#000">html</span><span style="color:#f8f8f8;text-decoration:underline">
</span></code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-42d2781871bda073e81ead9a376e3468">2.4 - Plantillas</h1>
    
	

<div class="pageinfo pageinfo-primary">
<p>Algunas notas sobre el trabajo con las plantillas:</p>
<ul>
<li>Sintaxis básica de las plantillas en Hugo</li>
<li>Organización de las plantillas. Directorio <code>layout</code></li>
<li>Modificación de una plantilla</li>
<li>Creación de plantillas</li>
</ul>
<p><strong>Documentación:</strong>  <a href="https://gohugo.io/templates/">https://gohugo.io/templates/</a></p>

</div>

<h2 id="sintaxis-básica">Sintaxis básica</h2>
<p>Acceso a variables predefinidas:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go-html-template" data-lang="go-html-template"><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Title</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>

<span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Params.bar</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>

<span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">if</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">or</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">isset</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Params</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;alt&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">isset</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Params</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;caption&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span> Caption <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">end</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>

<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">title</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Title</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">title</span><span style="color:#000;font-weight:bold">&gt;</span>
</code></pre></div><h2 id="partial">Partial</h2>
<p>Incluye un fragmento en una plantilla para no tener que repetirlo:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go-html-template" data-lang="go-html-template"><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">partial</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;&lt;PATH&gt;/&lt;PARTIAL&gt;.&lt;EXTENSION&gt;&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>.

# Por ejemplo: layouts/partials/header.html partial

<span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">partial</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;header.html&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>

</code></pre></div>

<div class="alert alert-danger" role="alert">
<h4 class="alert-heading">Importante</h4>

    Los partials nos ayudan a reutilizar el código y a no repetir fragmentos.

</div>

<h2 id="plantillas-base-y-bloques">Plantillas base y bloques</h2>
<p><a href="https://gohugo.io/templates/base/">https://gohugo.io/templates/base/</a></p>
<p><code>layouts/_default/baseof.html</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#8f5902;font-style:italic">&lt;!DOCTYPE html&gt;</span>
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">html</span><span style="color:#000;font-weight:bold">&gt;</span>
  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">head</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">meta</span> <span style="color:#c4a000">charset</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;utf-8&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">title</span><span style="color:#000;font-weight:bold">&gt;</span>{{ block &#34;title&#34; . }}
      <span style="color:#8f5902;font-style:italic">&lt;!-- Blocks may include default content. --&gt;</span>
      {{ .Site.Title }}
    {{ end }}<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">title</span><span style="color:#000;font-weight:bold">&gt;</span>
  <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">head</span><span style="color:#000;font-weight:bold">&gt;</span>
  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">body</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#8f5902;font-style:italic">&lt;!-- Code that all your templates share, like a header --&gt;</span>
    {{ block &#34;main&#34; . }}
      <span style="color:#8f5902;font-style:italic">&lt;!-- The part of the page that begins to differ between templates --&gt;</span>
    {{ end }}
    {{ block &#34;footer&#34; . }}
    <span style="color:#8f5902;font-style:italic">&lt;!-- More shared code, perhaps a footer but that can be overridden if need be in  --&gt;</span>
    {{ end }}
  <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">body</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">html</span><span style="color:#000;font-weight:bold">&gt;</span>
</code></pre></div><p><code>layouts/_default/single.html</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go-html-template" data-lang="go-html-template"><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">define</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;title&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
  <span style="color:#8f5902;font-style:italic">&lt;!-- Sobreescribe el valor de  baseof.html --&gt;</span>
  <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Title</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span> <span style="color:#ce5c00">&amp;ndash;</span> <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Site.Title</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
<span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">end</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
<span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">define</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;main&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">h1</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Title</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">h1</span><span style="color:#000;font-weight:bold">&gt;</span>
  <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Content</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
<span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">end</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
</code></pre></div><h2 id="funciones">Funciones</h2>
<p><a href="https://gohugo.io/templates/introduction/">https://gohugo.io/templates/introduction/</a></p>
<h2 id="parámetros-de-las-páginas">Parámetros de las páginas</h2>
<p><a href="https://gohugo.io/templates/introduction/#use-content-page-parameters">https://gohugo.io/templates/introduction/#use-content-page-parameters</a></p>
<p>Podemos usar datos escritos en el <strong>front-matter</strong> de la página desde la plantilla:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go-html-template" data-lang="go-html-template"><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">if</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">not</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Params.notoc</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">aside</span><span style="color:#000;font-weight:bold">&gt;</span>
  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">header</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">a</span> <span style="color:#c4a000">href</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;#</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#c4a000">.Title</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">urlize</span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#4e9a06">&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">h3</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#c4a000">.Title</span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">h3</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">a</span><span style="color:#000;font-weight:bold">&gt;</span>
  <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">header</span><span style="color:#000;font-weight:bold">&gt;</span>
  <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#c4a000">.TableOfContents</span><span style="color:#8f5902;font-style:italic">}}</span>
<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">aside</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">a</span> <span style="color:#c4a000">href</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;#&#34;</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;toc-toggle&#34;</span><span style="color:#000;font-weight:bold">&gt;&lt;/</span><span style="color:#204a87;font-weight:bold">a</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">end</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
</code></pre></div><h2 id="uso-de-la-configuración-del-sitio">Uso de la configuración del sitio</h2>
<p><a href="https://gohugo.io/templates/introduction/#use-site-configuration-parameters">https://gohugo.io/templates/introduction/#use-site-configuration-parameters</a></p>
<p>Y también datos del archivo de configuración general:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go-html-template" data-lang="go-html-template"><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">if</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Site.Params.copyrighthtml</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">footer</span><span style="color:#000;font-weight:bold">&gt;</span>
        <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">div</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;text-center&#34;</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#c4a000">.Site.Params.CopyrightHTML</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">safeHTML</span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">div</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">footer</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">end</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
</code></pre></div><h2 id="uso-de-datos-de-la-página">Uso de datos de la página</h2>
<p><strong>Archetype</strong> ejemplo</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml"><span style="color:#000">---</span>
<span style="color:#000">title</span><span style="color:#a40000">:</span> <span style="color:#a40000">​</span> <span style="color:#4e9a06">&#34; ​ {{​ ​ replace​ ​ .Name​ ​ &#34;</span><span style="color:#000">-</span><span style="color:#4e9a06">&#34; &#34;</span> <span style="color:#4e9a06">&#34; | title }}&#34;</span>
<span style="color:#000">draft</span><span style="color:#a40000">:</span> <span style="color:#204a87;font-weight:bold">false</span>
<span style="color:#000">image</span><span style="color:#a40000">:</span> <span style="color:#a40000">​</span> <span style="color:#a40000">//</span><span style="color:#000">via</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">placeholder</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">com</span><span style="color:#a40000">/</span><span style="color:#0000cf;font-weight:bold">640</span><span style="color:#000">x150</span>
<span style="color:#000">alt_text</span><span style="color:#a40000">:</span> <span style="color:#a40000">​</span> <span style="color:#4e9a06">&#34; ​ {{​ ​ replace​ ​ .Name​ ​ &#34;</span><span style="color:#000">-</span><span style="color:#4e9a06">&#34; &#34;</span> <span style="color:#4e9a06">&#34; | title }} screenshot&#34;</span>
<span style="color:#000">summary</span><span style="color:#a40000">:</span> <span style="color:#a40000">​</span> <span style="color:#4e9a06">&#34; ​ Summary​ ​ of​ ​ the​ ​ {{​ ​ replace​ ​ .Name​ ​ &#34;</span><span style="color:#000">-</span><span style="color:#4e9a06">&#34; &#34;</span> <span style="color:#4e9a06">&#34; | title }} project&#34;</span>
<span style="color:#000">tech_used</span><span style="color:#a40000">:</span>
<span style="color:#000">-</span> <span style="color:#a40000">​</span> <span style="color:#000">JavaScript</span>
<span style="color:#000">-</span> <span style="color:#a40000">​</span> <span style="color:#000">CSS</span>
<span style="color:#000">-</span> <span style="color:#a40000">​</span> <span style="color:#000">HTML</span>
<span style="color:#000">---</span>

</code></pre></div><p><strong>Template</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go-html-template" data-lang="go-html-template"><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">define</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;main&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">div</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;project-container&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">section</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;project-list&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
      <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">h2</span><span style="color:#000;font-weight:bold">&gt;</span>Projects<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">h2</span><span style="color:#000;font-weight:bold">&gt;</span>
      <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">ul</span><span style="color:#000;font-weight:bold">&gt;</span>
        <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">range</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">where</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Site.RegularPages</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;Type&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;in&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;projects&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
          <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">li</span><span style="color:#000;font-weight:bold">&gt;&lt;</span><span style="color:#204a87;font-weight:bold">a</span> <span style="color:#c4a000">href</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.RelPermalink</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#4e9a06">&#34;</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Title</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">a</span><span style="color:#000;font-weight:bold">&gt;&lt;/</span><span style="color:#204a87;font-weight:bold">li</span><span style="color:#000;font-weight:bold">&gt;</span>
        <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">end</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
      <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">ul</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">section</span><span style="color:#000;font-weight:bold">&gt;</span>

    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">section</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;project&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
      <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">h2</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Title</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">h2</span><span style="color:#000;font-weight:bold">&gt;</span>

      <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Content</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
      <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">img</span> <span style="color:#c4a000">alt</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Params.alt_text</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#4e9a06">&#34;</span> <span style="color:#c4a000">src</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Params.image</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#4e9a06">&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>

      <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">h3</span><span style="color:#000;font-weight:bold">&gt;</span>Tech used<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">h3</span><span style="color:#000;font-weight:bold">&gt;</span>
      <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">ul</span><span style="color:#000;font-weight:bold">&gt;</span>
        <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">range</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Params.tech_used</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
          <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">li</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">li</span><span style="color:#000;font-weight:bold">&gt;</span>
        <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">end</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
      <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">ul</span><span style="color:#000;font-weight:bold">&gt;</span>

    <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">section</span><span style="color:#000;font-weight:bold">&gt;</span>

  <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">div</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">end</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
</code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-24831692153d2ad6881121b6fcdf7124">2.5 - Shortcodes</h1>
    
	

<div class="pageinfo pageinfo-primary">
<p>Extensiones a markdown.</p>
<p><strong>IMPORTANTE:</strong> Se usan dentro del texto <strong>.md</strong> no en las plantillas</p>
<p>Doc: <a href="https://gohugo.io/content-management/shortcodes">https://gohugo.io/content-management/shortcodes</a></p>

</div>

<p>Ejemplo:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go-html-template" data-lang="go-html-template">
<span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#a40000">&lt;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">instagram</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">BWNjjyYFxVx</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#a40000">&gt;</span><span style="color:#8f5902;font-style:italic">}}</span>

</code></pre></div><h2 id="twitter">Twitter</h2>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Hugo 0.24 Released: Big archetype update + <a href="https://twitter.com/Netlify?ref_src=twsrc%5Etfw">@Netlify</a> _redirects etc. file support<a href="https://t.co/X94FmYDEZJ">https://t.co/X94FmYDEZJ</a> <a href="https://twitter.com/hashtag/gohugo?src=hash&amp;ref_src=twsrc%5Etfw">#gohugo</a> <a href="https://twitter.com/hashtag/golang?src=hash&amp;ref_src=twsrc%5Etfw">#golang</a> <a href="https://twitter.com/spf13?ref_src=twsrc%5Etfw">@spf13</a> <a href="https://twitter.com/bepsays?ref_src=twsrc%5Etfw">@bepsays</a></p>&mdash; GoHugo.io (@GoHugoIO) <a href="https://twitter.com/GoHugoIO/status/877500564405444608?ref_src=twsrc%5Etfw">June 21, 2017</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<h2 id="vimeo">Vimeo</h2>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://player.vimeo.com/video/146022717" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="vimeo video" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
</div>


</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-0202dfd47ec634a5dd6a41e0ad63ab0c">2.6 - Trabajo con datos</h1>
    
	

<div class="pageinfo pageinfo-primary">
<p>Proceso de datos: en archivos locales, en archivos y directorios o remotos.</p>

</div>

<p>Ejemplo en templates:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go-html-template" data-lang="go-html-template">
<span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">define</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;main&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>

<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">h1</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Title</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">h1</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">p</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Params.mensaje</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">markdownify</span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">p</span><span style="color:#000;font-weight:bold">&gt;</span>

<span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Content</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>

<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">div</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;mic&#34;</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;carousel slide &#34;</span> <span style="color:#c4a000">data-ride</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;carousel&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">div</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;carousel-inner&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
        <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">range</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$elem_index</span><span style="color:#ce5c00;font-weight:bold">,</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$elem_val</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">:=</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Site.Data.clients</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
        <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">div</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;carousel-item </span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">if</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">eq</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$elem_index</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;1&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#4e9a06"> active </span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">end</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#4e9a06">&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
            <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">img</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;d-block w-100&#34;</span> <span style="color:#c4a000">src</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.image</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">relURL</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#4e9a06">&#34;</span>  <span style="color:#c4a000">alt</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#4e9a06">&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
        <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">div</span><span style="color:#000;font-weight:bold">&gt;</span>
        <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">end</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
    <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">div</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">div</span><span style="color:#000;font-weight:bold">&gt;</span>

<span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$dataC</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">:=</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">getCSV</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;,&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Params.urldatos</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>

 <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">table</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;table table-striped&#34;</span> <span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">range</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$i</span><span style="color:#ce5c00;font-weight:bold">,</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$r</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">:=</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$dataC</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
        <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">if</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">eq</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$i</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">0</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
            <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">thead</span><span style="color:#000;font-weight:bold">&gt;</span>
            <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">tr</span><span style="color:#000;font-weight:bold">&gt;</span>
            <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">th</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">index</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$r</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">0</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">th</span><span style="color:#000;font-weight:bold">&gt;</span>
            <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">th</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">index</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$r</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">th</span><span style="color:#000;font-weight:bold">&gt;</span>
            <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">th</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">index</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$r</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">2</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">th</span><span style="color:#000;font-weight:bold">&gt;</span>
            <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">tr</span><span style="color:#000;font-weight:bold">&gt;</span>
            <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">thead</span><span style="color:#000;font-weight:bold">&gt;</span>
            <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">tbody</span><span style="color:#000;font-weight:bold">&gt;</span>
        <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">else</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
            <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">tr</span><span style="color:#000;font-weight:bold">&gt;</span>
                <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">td</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">index</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$r</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">0</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">td</span><span style="color:#000;font-weight:bold">&gt;</span>
                <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">td</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">index</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$r</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">td</span><span style="color:#000;font-weight:bold">&gt;</span>
                <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">td</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">index</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$r</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">2</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">td</span><span style="color:#000;font-weight:bold">&gt;</span>
            <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">tr</span><span style="color:#000;font-weight:bold">&gt;</span>
        <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">end</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
    <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">end</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
    <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">tbody</span><span style="color:#000;font-weight:bold">&gt;</span>
  <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">table</span><span style="color:#000;font-weight:bold">&gt;</span>



   <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">ul</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">range</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#c4a000">.Site.Data.tv</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
        <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">li</span><span style="color:#000;font-weight:bold">&gt;</span>  <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">li</span><span style="color:#000;font-weight:bold">&gt;</span>
        <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">range</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.channels</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
            <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">img</span> <span style="color:#c4a000">src</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#c4a000">.logo</span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#4e9a06">&#34;</span> <span style="color:#c4a000">alt</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#4e9a06">&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
        <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">end</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
    <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">end</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
    <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">ul</span><span style="color:#000;font-weight:bold">&gt;</span>


<span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">end</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
</code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-a7304746b15ac94e89fac1751b4a0239">2.7 - Búsqueda de páginas</h1>
    
	

<div class="pageinfo pageinfo-primary">
<p><strong>Objetivo</strong>: Introducir un motor de búsqueda en el sitio.</p>
<ul>
<li><a href="https://gohugo.io/tools/search/">https://gohugo.io/tools/search/</a></li>
<li><a href="https://gist.github.com/eddiewebb/735feb48f50f0ddd65ae5606a1cb41ae">Búsqueda con Fuse.js</a></li>
</ul>

</div>

<p>Alternativas a la búsqueda en sitios estáticos. Para sitios con muchas páginas, considerar <a href="https://www.algolia.com/">Algolia</a></p>
<h2 id="búsqueda-en-nuestro-sitio-con-fusejs">Búsqueda en nuestro sitio con <code>fuse.js</code></h2>
<p>Ejemplo: <a href="https://www.edwardawebb.com/search/">https://www.edwardawebb.com/search/</a></p>
<h2 id="configuración">Configuración</h2>
<h3 id="página-de-búsqueda-contenido">Página de búsqueda (contenido)</h3>
<p>Esta página responde a la url <code>/buscar</code>. No tiene contenido. El contenido se generará con la plantilla <strong>layouts/page/search.html</strong></p>
<p><strong>content/buscar.md</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#ce5c00;font-weight:bold">---</span>
<span style="color:#000">title</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Resultados de búsqueda&#34;</span>
<span style="color:#000">sitemap</span><span style="color:#000;font-weight:bold">:</span>
  <span style="color:#000">priority</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0.1</span>
<span style="color:#000">layout</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;buscar&#34;</span>
<span style="color:#ce5c00;font-weight:bold">---</span>
</code></pre></div><h3 id="configurar-salidas-en-configtoml">Configurar salidas en <code>config.toml</code></h3>
<p>Incluir <strong>JSON</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml"><span style="color:#000;font-weight:bold">[</span><span style="color:#000">outputs</span><span style="color:#000;font-weight:bold">]</span>
  <span style="color:#000">home</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#34;HTML&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;JSON&#34;</span><span style="color:#000;font-weight:bold">]</span>
</code></pre></div><h3 id="crear-indexjson">Crear <code>index.json</code></h3>
<p><strong>layouts/index.json</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#000;font-weight:bold">{{</span><span style="color:#ce5c00;font-weight:bold">-</span> <span style="color:#a40000">$</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Scratch</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Add</span> <span style="color:#4e9a06">&#34;index&#34;</span> <span style="color:#000">slice</span> <span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000;font-weight:bold">}}</span>
<span style="color:#000;font-weight:bold">{{</span><span style="color:#ce5c00;font-weight:bold">-</span> <span style="color:#204a87;font-weight:bold">range</span> <span style="color:#000;font-weight:bold">.</span><span style="color:#000">Site</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">RegularPages</span> <span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000;font-weight:bold">}}</span>
    <span style="color:#000;font-weight:bold">{{</span><span style="color:#ce5c00;font-weight:bold">-</span> <span style="color:#a40000">$</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Scratch</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Add</span> <span style="color:#4e9a06">&#34;index&#34;</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">dict</span> <span style="color:#4e9a06">&#34;title&#34;</span> <span style="color:#000;font-weight:bold">.</span><span style="color:#000">Title</span> <span style="color:#4e9a06">&#34;tags&#34;</span> <span style="color:#000;font-weight:bold">.</span><span style="color:#000">Params</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">tags</span> <span style="color:#4e9a06">&#34;categories&#34;</span> <span style="color:#000;font-weight:bold">.</span><span style="color:#000">Params</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">categories</span> <span style="color:#4e9a06">&#34;contents&#34;</span> <span style="color:#000;font-weight:bold">.</span><span style="color:#000">Plain</span> <span style="color:#4e9a06">&#34;permalink&#34;</span> <span style="color:#000;font-weight:bold">.</span><span style="color:#000">Permalink</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000;font-weight:bold">}}</span>
<span style="color:#000;font-weight:bold">{{</span><span style="color:#ce5c00;font-weight:bold">-</span> <span style="color:#000">end</span> <span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000;font-weight:bold">}}</span>
<span style="color:#000;font-weight:bold">{{</span><span style="color:#ce5c00;font-weight:bold">-</span> <span style="color:#a40000">$</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Scratch</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Get</span> <span style="color:#4e9a06">&#34;index&#34;</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#000">jsonify</span> <span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000;font-weight:bold">}}</span>
</code></pre></div><p>Para buscar en más campos, modifica el <strong>index.json</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">  <span style="color:#4e9a06">&#34;contents&#34;</span><span style="color:#000;font-weight:bold">:{{</span> <span style="color:#000;font-weight:bold">.</span><span style="color:#000">Content</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#000">plainify</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#000">jsonify</span> <span style="color:#000;font-weight:bold">}}</span>
  <span style="color:#000;font-weight:bold">{{</span> <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">.</span><span style="color:#000">Params</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">tags</span> <span style="color:#000;font-weight:bold">}},</span>
  <span style="color:#4e9a06">&#34;tags&#34;</span><span style="color:#000;font-weight:bold">:{{</span> <span style="color:#000;font-weight:bold">.</span><span style="color:#000">Params</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">tags</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#000">jsonify</span> <span style="color:#000;font-weight:bold">}}{{</span><span style="color:#000">end</span><span style="color:#000;font-weight:bold">}},</span>
  <span style="color:#4e9a06">&#34;categories&#34;</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{{</span> <span style="color:#000;font-weight:bold">.</span><span style="color:#000">Params</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">categories</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#000">jsonify</span> <span style="color:#000;font-weight:bold">}},</span>

</code></pre></div><h3 id="plantilla-de-búsqueda">Plantilla de búsqueda</h3>
<blockquote>
<p><strong>ATENCIÓN:</strong> La plantilla base tiene que tener los bloques <strong>footerfiles</strong> y <strong>main</strong>. Si no renómbralos o crea los bloques en la plantilla base.</p>
</blockquote>
<p><strong>layouts/_default/buscar.html</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go-html-template" data-lang="go-html-template"><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">define</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;footerfiles&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">script</span> <span style="color:#c4a000">src</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;https://code.jquery.com/jquery-3.3.1.min.js&#34;</span><span style="color:#000;font-weight:bold">&gt;&lt;/</span><span style="color:#204a87;font-weight:bold">script</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">script</span> <span style="color:#c4a000">src</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.0/fuse.min.js&#34;</span><span style="color:#000;font-weight:bold">&gt;&lt;/</span><span style="color:#204a87;font-weight:bold">script</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">script</span> <span style="color:#c4a000">src</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js&#34;</span><span style="color:#000;font-weight:bold">&gt;&lt;/</span><span style="color:#204a87;font-weight:bold">script</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">script</span> <span style="color:#c4a000">src</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;js/search.js&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">absURL</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#4e9a06">&#34;</span><span style="color:#000;font-weight:bold">&gt;&lt;/</span><span style="color:#204a87;font-weight:bold">script</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">end</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>

<span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">define</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;main&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">section</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;resume-section p-3 p-lg-5 d-flex flex-column&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">div</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;my-auto&#34;</span> <span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">form</span> <span style="color:#c4a000">action</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;buscar&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">|</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">absURL</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#4e9a06">&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
      <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">input</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;search-query&#34;</span> <span style="color:#c4a000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;s&#34;</span><span style="color:#000;font-weight:bold">/&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">form</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">div</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;search-results&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
     <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">h3</span><span style="color:#000;font-weight:bold">&gt;</span>Páginas<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">h3</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">div</span><span style="color:#000;font-weight:bold">&gt;</span>
  <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">div</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">section</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#8f5902;font-style:italic">&lt;!-- this template is sucked in by search.js and appended to the search-results div above. So editing here will adjust style --&gt;</span>
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">script</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;search-result-template&#34;</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;text/x-js-template&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">div</span> <span style="color:#000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;summary-${key}&#34;</span><span style="color:#ce5c00;font-weight:bold">&gt;</span>
      <span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">h4</span><span style="color:#ce5c00;font-weight:bold">&gt;&lt;</span><span style="color:#000">a</span> <span style="color:#000">href</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;${link}&#34;</span><span style="color:#ce5c00;font-weight:bold">&gt;</span><span style="color:#000">$</span><span style="color:#000;font-weight:bold">{</span><span style="color:#000">title</span><span style="color:#000;font-weight:bold">}</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#a40000">/a&gt;&lt;/h4&gt;</span>
      <span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">p</span><span style="color:#ce5c00;font-weight:bold">&gt;</span><span style="color:#000">$</span><span style="color:#000;font-weight:bold">{</span><span style="color:#000">snippet</span><span style="color:#000;font-weight:bold">}</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#a40000">/p&gt;</span>
      <span style="color:#000">$</span><span style="color:#000;font-weight:bold">{</span> <span style="color:#000">isset</span> <span style="color:#000">tags</span> <span style="color:#000;font-weight:bold">}</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">p</span><span style="color:#ce5c00;font-weight:bold">&gt;</span><span style="color:#000">Tags</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000">$</span><span style="color:#000;font-weight:bold">{</span><span style="color:#000">tags</span><span style="color:#000;font-weight:bold">}</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#a40000">/p&gt;${ end }</span>
      <span style="color:#000">$</span><span style="color:#000;font-weight:bold">{</span> <span style="color:#000">isset</span> <span style="color:#000">categories</span> <span style="color:#000;font-weight:bold">}</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">p</span><span style="color:#ce5c00;font-weight:bold">&gt;</span><span style="color:#000">Categories</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000">$</span><span style="color:#000;font-weight:bold">{</span><span style="color:#000">categories</span><span style="color:#000;font-weight:bold">}</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#a40000">/p&gt;${ end }</span>
    <span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#a40000">/div&gt;</span>
<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">script</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">end</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
</code></pre></div><h3 id="searchjs">Search.js</h3>
<p>Usa jquery, fuse.js y mark.js.  Busca el index de hugo y devuelve el contenido con coloreado.</p>
<p><strong>static/js/search.js</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#000">summaryInclude</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">60</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">fuseOptions</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000">shouldSort</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#000">includeMatches</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#000">threshold</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0.0</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#000">tokenize</span><span style="color:#ce5c00;font-weight:bold">:</span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#000">location</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#000">distance</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">100</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#000">maxPatternLength</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">32</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#000">minMatchCharLength</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">,</span>
  <span style="color:#000">keys</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
    <span style="color:#000;font-weight:bold">{</span><span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span><span style="color:#4e9a06">&#34;title&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">weight</span><span style="color:#ce5c00;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">0.8</span><span style="color:#000;font-weight:bold">},</span>
    <span style="color:#000;font-weight:bold">{</span><span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span><span style="color:#4e9a06">&#34;contents&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">weight</span><span style="color:#ce5c00;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">0.5</span><span style="color:#000;font-weight:bold">},</span>
    <span style="color:#000;font-weight:bold">{</span><span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span><span style="color:#4e9a06">&#34;tags&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">weight</span><span style="color:#ce5c00;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">0.3</span><span style="color:#000;font-weight:bold">},</span>
    <span style="color:#000;font-weight:bold">{</span><span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">:</span><span style="color:#4e9a06">&#34;categories&#34;</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">weight</span><span style="color:#ce5c00;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">0.3</span><span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">]</span>
<span style="color:#000;font-weight:bold">};</span>


<span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">searchQuery</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">param</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;s&#34;</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#204a87;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">searchQuery</span><span style="color:#000;font-weight:bold">){</span>
  <span style="color:#000">$</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;#search-query&#34;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">val</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">searchQuery</span><span style="color:#000;font-weight:bold">);</span>
  <span style="color:#000">executeSearch</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">searchQuery</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#000;font-weight:bold">}</span><span style="color:#204a87;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#000">$</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;#search-results&#39;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">append</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;&lt;p&gt;Introduzca una una palabra o frase&lt;/p&gt;&#34;</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#000;font-weight:bold">}</span>



<span style="color:#204a87;font-weight:bold">function</span> <span style="color:#000">executeSearch</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">searchQuery</span><span style="color:#000;font-weight:bold">){</span>
  <span style="color:#000">$</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">getJSON</span><span style="color:#000;font-weight:bold">(</span> <span style="color:#4e9a06">&#34;/index.json&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#204a87;font-weight:bold">function</span><span style="color:#000;font-weight:bold">(</span> <span style="color:#000">data</span> <span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">pages</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">data</span><span style="color:#000;font-weight:bold">;</span>
    <span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">fuse</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">Fuse</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">pages</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">fuseOptions</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">result</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">fuse</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">search</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">searchQuery</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000">console</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">log</span><span style="color:#000;font-weight:bold">({</span><span style="color:#4e9a06">&#34;matches&#34;</span><span style="color:#ce5c00;font-weight:bold">:</span><span style="color:#000">result</span><span style="color:#000;font-weight:bold">});</span>
    <span style="color:#204a87;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">result</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">length</span> <span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">){</span>
      <span style="color:#000">populateResults</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">result</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000;font-weight:bold">}</span><span style="color:#204a87;font-weight:bold">else</span><span style="color:#000;font-weight:bold">{</span>
      <span style="color:#000">$</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;#search-results&#39;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">append</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;&lt;p&gt;No se han encontrado resultados&lt;/p&gt;&#34;</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">});</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">function</span> <span style="color:#000">populateResults</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">result</span><span style="color:#000;font-weight:bold">){</span>
  <span style="color:#000">$</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">each</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">result</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">function</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">key</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">value</span><span style="color:#000;font-weight:bold">){</span>
    <span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">contents</span><span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">value</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">item</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">contents</span><span style="color:#000;font-weight:bold">;</span>
    <span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">snippet</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#34;&#34;</span><span style="color:#000;font-weight:bold">;</span>
    <span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">snippetHighlights</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000;font-weight:bold">[];</span>
    <span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">tags</span> <span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000;font-weight:bold">[];</span>
    <span style="color:#204a87;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span> <span style="color:#000">fuseOptions</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">tokenize</span> <span style="color:#000;font-weight:bold">){</span>
      <span style="color:#000">snippetHighlights</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">push</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">searchQuery</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000;font-weight:bold">}</span><span style="color:#204a87;font-weight:bold">else</span><span style="color:#000;font-weight:bold">{</span>
      <span style="color:#000">$</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">each</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">value</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">matches</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">function</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">matchKey</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">mvalue</span><span style="color:#000;font-weight:bold">){</span>
        <span style="color:#204a87;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">mvalue</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">key</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#4e9a06">&#34;tags&#34;</span> <span style="color:#ce5c00;font-weight:bold">||</span> <span style="color:#000">mvalue</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">key</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#4e9a06">&#34;categories&#34;</span> <span style="color:#000;font-weight:bold">){</span>
          <span style="color:#000">snippetHighlights</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">push</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">mvalue</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">value</span><span style="color:#000;font-weight:bold">);</span>
        <span style="color:#000;font-weight:bold">}</span><span style="color:#204a87;font-weight:bold">else</span> <span style="color:#204a87;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">mvalue</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">key</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#4e9a06">&#34;contents&#34;</span><span style="color:#000;font-weight:bold">){</span>
          <span style="color:#000">start</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">mvalue</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">indices</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">][</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">]</span><span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">summaryInclude</span><span style="color:#ce5c00;font-weight:bold">&gt;</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#ce5c00;font-weight:bold">?</span><span style="color:#000">mvalue</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">indices</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">][</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">]</span><span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">summaryInclude</span><span style="color:#ce5c00;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">;</span>
          <span style="color:#000">end</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">mvalue</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">indices</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">][</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">]</span><span style="color:#ce5c00;font-weight:bold">+</span><span style="color:#000">summaryInclude</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">contents</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">length</span><span style="color:#ce5c00;font-weight:bold">?</span><span style="color:#000">mvalue</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">indices</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">][</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">]</span><span style="color:#ce5c00;font-weight:bold">+</span><span style="color:#000">summaryInclude</span><span style="color:#ce5c00;font-weight:bold">:</span><span style="color:#000">contents</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">length</span><span style="color:#000;font-weight:bold">;</span>
          <span style="color:#000">snippet</span> <span style="color:#ce5c00;font-weight:bold">+=</span> <span style="color:#000">contents</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">substring</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">start</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">end</span><span style="color:#000;font-weight:bold">);</span>
          <span style="color:#000">snippetHighlights</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">push</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">mvalue</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">value</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">substring</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">mvalue</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">indices</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">][</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">],</span><span style="color:#000">mvalue</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">indices</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">][</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">]</span><span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">mvalue</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">indices</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">][</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">]</span><span style="color:#ce5c00;font-weight:bold">+</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">));</span>
        <span style="color:#000;font-weight:bold">}</span>
      <span style="color:#000;font-weight:bold">});</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#204a87;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">snippet</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">length</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">){</span>
      <span style="color:#000">snippet</span> <span style="color:#ce5c00;font-weight:bold">+=</span> <span style="color:#000">contents</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">substring</span><span style="color:#000;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">summaryInclude</span><span style="color:#ce5c00;font-weight:bold">*</span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#8f5902;font-style:italic">//pull template from hugo templarte definition
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">templateDefinition</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">$</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;#search-result-template&#39;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">html</span><span style="color:#000;font-weight:bold">();</span>
    <span style="color:#8f5902;font-style:italic">//replace values
</span><span style="color:#8f5902;font-style:italic"></span>    <span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">output</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">render</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">templateDefinition</span><span style="color:#000;font-weight:bold">,{</span><span style="color:#000">key</span><span style="color:#ce5c00;font-weight:bold">:</span><span style="color:#000">key</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">title</span><span style="color:#ce5c00;font-weight:bold">:</span><span style="color:#000">value</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">item</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">title</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">link</span><span style="color:#ce5c00;font-weight:bold">:</span><span style="color:#000">value</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">item</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">permalink</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">tags</span><span style="color:#ce5c00;font-weight:bold">:</span><span style="color:#000">value</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">item</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">tags</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">categories</span><span style="color:#ce5c00;font-weight:bold">:</span><span style="color:#000">value</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">item</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">categories</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">snippet</span><span style="color:#ce5c00;font-weight:bold">:</span><span style="color:#000">snippet</span><span style="color:#000;font-weight:bold">});</span>
    <span style="color:#000">$</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;#search-results&#39;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">append</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">output</span><span style="color:#000;font-weight:bold">);</span>

    <span style="color:#000">$</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">each</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">snippetHighlights</span><span style="color:#000;font-weight:bold">,</span><span style="color:#204a87;font-weight:bold">function</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">snipkey</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">snipvalue</span><span style="color:#000;font-weight:bold">){</span>
      <span style="color:#000">$</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;#summary-&#34;</span><span style="color:#ce5c00;font-weight:bold">+</span><span style="color:#000">key</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">mark</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">snipvalue</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000;font-weight:bold">});</span>

  <span style="color:#000;font-weight:bold">});</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">function</span> <span style="color:#000">param</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">name</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#204a87">decodeURIComponent</span><span style="color:#000;font-weight:bold">((</span><span style="color:#000">location</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">search</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">split</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">name</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#4e9a06">&#39;=&#39;</span><span style="color:#000;font-weight:bold">)[</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">||</span> <span style="color:#4e9a06">&#39;&#39;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">split</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;&amp;&#39;</span><span style="color:#000;font-weight:bold">)[</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">]).</span><span style="color:#000">replace</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">/\+/g</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39; &#39;</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#000;font-weight:bold">}</span>

<span style="color:#204a87;font-weight:bold">function</span> <span style="color:#000">render</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">templateString</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">data</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
  <span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">conditionalMatches</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">conditionalPattern</span><span style="color:#000;font-weight:bold">,</span><span style="color:#000">copy</span><span style="color:#000;font-weight:bold">;</span>
  <span style="color:#000">conditionalPattern</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">/\$\{\s*isset ([a-zA-Z]*) \s*\}(.*)\$\{\s*end\s*}/g</span><span style="color:#000;font-weight:bold">;</span>
  <span style="color:#8f5902;font-style:italic">//since loop below depends on re.lastInxdex, we use a copy to capture any manipulations whilst inside the loop
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#000">copy</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">templateString</span><span style="color:#000;font-weight:bold">;</span>
  <span style="color:#204a87;font-weight:bold">while</span> <span style="color:#000;font-weight:bold">((</span><span style="color:#000">conditionalMatches</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">conditionalPattern</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">exec</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">templateString</span><span style="color:#000;font-weight:bold">))</span> <span style="color:#ce5c00;font-weight:bold">!==</span> <span style="color:#204a87;font-weight:bold">null</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#204a87;font-weight:bold">if</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">data</span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">conditionalMatches</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">]]){</span>
      <span style="color:#8f5902;font-style:italic">//valid key, remove conditionals, leave contents.
</span><span style="color:#8f5902;font-style:italic"></span>      <span style="color:#000">copy</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">copy</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">replace</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">conditionalMatches</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">],</span><span style="color:#000">conditionalMatches</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">2</span><span style="color:#000;font-weight:bold">]);</span>
    <span style="color:#000;font-weight:bold">}</span><span style="color:#204a87;font-weight:bold">else</span><span style="color:#000;font-weight:bold">{</span>
      <span style="color:#8f5902;font-style:italic">//not valid, remove entire section
</span><span style="color:#8f5902;font-style:italic"></span>      <span style="color:#000">copy</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">copy</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">replace</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">conditionalMatches</span><span style="color:#000;font-weight:bold">[</span><span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">],</span><span style="color:#4e9a06">&#39;&#39;</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000">templateString</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">copy</span><span style="color:#000;font-weight:bold">;</span>
  <span style="color:#8f5902;font-style:italic">//now any conditionals removed we can do simple substitution
</span><span style="color:#8f5902;font-style:italic"></span>  <span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">key</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">find</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">re</span><span style="color:#000;font-weight:bold">;</span>
  <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">key</span> <span style="color:#204a87;font-weight:bold">in</span> <span style="color:#000">data</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">find</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;\\$\\{\\s*&#39;</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">key</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#4e9a06">&#39;\\s*\\}&#39;</span><span style="color:#000;font-weight:bold">;</span>
    <span style="color:#000">re</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#204a87">RegExp</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">find</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;g&#39;</span><span style="color:#000;font-weight:bold">);</span>
    <span style="color:#000">templateString</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">templateString</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">replace</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">re</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">data</span><span style="color:#000;font-weight:bold">[</span><span style="color:#000">key</span><span style="color:#000;font-weight:bold">]);</span>
  <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">templateString</span><span style="color:#000;font-weight:bold">;</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-bb37aa76c1122855eaad534ad2f4aba9">2.8 - Inserción de formularios dinámicos</h1>
    
	

<div class="pageinfo pageinfo-primary">
<p><strong>Objetivo</strong>: Introducir un formulario con envío de correo.</p>
<ul>
<li>Ejemplo con formspree</li>
</ul>

</div>

<h2 id="formularios-de-contacto">Formularios de contacto</h2>
<p>Hay muchos servicios. Formik, StaticKit, FormKeep, Netlify Forms, Formspree, FormPlug, Google Forms &hellip;</p>
<ul>
<li><a href="https://formspree.io">https://formspree.io</a></li>
<li>Ejemplos: <a href="https://formspree.io/library">https://formspree.io/library</a></li>
</ul>
<h2 id="pasos">Pasos:</h2>
<ol>
<li>Dar de alta un formulario en formspree</li>
<li>Ver <code>html</code> en <strong>integration</strong></li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#8f5902;font-style:italic">&lt;!-- modify this form HTML and place wherever you want your form --&gt;</span>
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">form</span>
  <span style="color:#c4a000">action</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;https://formspree.io/f/{form_id}&#34;</span>
  <span style="color:#c4a000">method</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;POST&#34;</span>
<span style="color:#000;font-weight:bold">&gt;</span>
  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">label</span><span style="color:#000;font-weight:bold">&gt;</span>
    Your email:
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">input</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;email&#34;</span> <span style="color:#c4a000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;_replyto&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
  <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">label</span><span style="color:#000;font-weight:bold">&gt;</span>
  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">label</span><span style="color:#000;font-weight:bold">&gt;</span>
    Your message:
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">textarea</span> <span style="color:#c4a000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;message&#34;</span><span style="color:#000;font-weight:bold">&gt;&lt;/</span><span style="color:#204a87;font-weight:bold">textarea</span><span style="color:#000;font-weight:bold">&gt;</span>
  <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">label</span><span style="color:#000;font-weight:bold">&gt;</span>
  <span style="color:#8f5902;font-style:italic">&lt;!-- your other form fields go here --&gt;</span>
  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">button</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;submit&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Send<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">button</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">form</span><span style="color:#000;font-weight:bold">&gt;</span>
</code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">form</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;fs-frm&#34;</span> <span style="color:#c4a000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;simple-contact-form&#34;</span> <span style="color:#c4a000">accept-charset</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;utf-8&#34;</span> <span style="color:#c4a000">action</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;https://formspree.io/f/{form_id}&#34;</span> <span style="color:#c4a000">method</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;post&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">fieldset</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;fs-frm-inputs&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">label</span> <span style="color:#c4a000">for</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;full-name&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Full Name<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">label</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">input</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;text&#34;</span> <span style="color:#c4a000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;name&#34;</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;full-name&#34;</span> <span style="color:#c4a000">placeholder</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Nombre completo&#34;</span> <span style="color:#c4a000">required</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">label</span> <span style="color:#c4a000">for</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;email-address&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Email Address<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">label</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">input</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;email&#34;</span> <span style="color:#c4a000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;_replyto&#34;</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;email-address&#34;</span> <span style="color:#c4a000">placeholder</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;email@domain.tld&#34;</span> <span style="color:#c4a000">required</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">label</span> <span style="color:#c4a000">for</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;message&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Message<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">label</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">textarea</span> <span style="color:#c4a000">rows</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;5&#34;</span> <span style="color:#c4a000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;message&#34;</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;message&#34;</span> <span style="color:#c4a000">placeholder</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Introduzca texto ...&#34;</span> <span style="color:#c4a000">required</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;&#34;</span><span style="color:#000;font-weight:bold">&gt;&lt;/</span><span style="color:#204a87;font-weight:bold">textarea</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">input</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;hidden&#34;</span> <span style="color:#c4a000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;_subject&#34;</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;email-subject&#34;</span> <span style="color:#c4a000">value</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Contact Form Submission&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
  <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">fieldset</span><span style="color:#000;font-weight:bold">&gt;</span>
  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">input</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;submit&#34;</span> <span style="color:#c4a000">value</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Submit&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">form</span><span style="color:#000;font-weight:bold">&gt;</span>
</code></pre></div><ol start="3">
<li>Modificar etiquetas y dar formato con <code>css</code></li>
</ol>
<h2 id="comentarios">Comentarios</h2>
<p>Inserción de comentarios dinámicos en las páginas.</p>
<p><a href="https://gohugo.io/content-management/comments/">https://gohugo.io/content-management/comments/</a></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-d98f5ba25f6c7aac1692d69ab2d588b7">2.9 - Algunas notas de repaso</h1>
    
	<h2 id="estructura-del-sitio">Estructura del sitio</h2>
<pre tabindex="0"><code>misitio
├── archetypes
|   └── default.md
├── content
├── data
├── layouts
|   ├── _default
|   |   └── baseof.html
|   └── index.html
├── static
├── themes
└── config.toml
</code></pre><h2 id="un-tutorial">Un tutorial</h2>
<ul>
<li><a href="https://hugo-mini-course.netlify.app/sections/templating/singlepage/">https://hugo-mini-course.netlify.app/sections/templating/singlepage/</a></li>
</ul>
<h2 id="sintaxis-de-templates">Sintaxis de templates</h2>
<p><strong>Variables</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go-html-template" data-lang="go-html-template"><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">title</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Title</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">title</span><span style="color:#000;font-weight:bold">&gt;</span>
</code></pre></div><p><strong>Contenido md de la página</strong>
<code>{{.Content}}</code></p>
<p><strong>Bucles</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go-html-template" data-lang="go-html-template"><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">range</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Pages.ByWeight</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
        <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">li</span><span style="color:#000;font-weight:bold">&gt;</span>
            <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">a</span> <span style="color:#c4a000">href</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#c4a000">.Permalink</span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#4e9a06">&#34;</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#c4a000">.Date.Format</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;2006-01-02&#34;</span><span style="color:#8f5902;font-style:italic">}}</span> | <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#c4a000">.Title</span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">a</span><span style="color:#000;font-weight:bold">&gt;</span>
        <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">li</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">end</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>

</code></pre></div><h2 id="proceso-de-imágenes">Proceso de imágenes</h2>
<p><a href="https://gohugo.io/content-management/image-processing/">https://gohugo.io/content-management/image-processing/</a></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#000;font-weight:bold">{{</span> <span style="color:#a40000">$</span><span style="color:#000">asset</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#000">resources</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Get</span> <span style="color:#4e9a06">&#34;/duck.png&#34;</span> <span style="color:#000;font-weight:bold">}}</span>
<span style="color:#000;font-weight:bold">{{</span> <span style="color:#a40000">$</span><span style="color:#000">img</span> <span style="color:#ce5c00;font-weight:bold">:=</span> <span style="color:#a40000">$</span><span style="color:#000">asset</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Fit</span> <span style="color:#4e9a06">&#34;600x400&#34;</span> <span style="color:#000;font-weight:bold">}}</span>
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">figure</span> <span style="color:#000">class</span><span style="color:#000;font-weight:bold">=</span><span style="color:#4e9a06">&#34;image is-3by2&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
  <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#000">img</span> <span style="color:#000">alt</span><span style="color:#000;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Yellow Duck&#34;</span> <span style="color:#000">src</span><span style="color:#000;font-weight:bold">=</span><span style="color:#4e9a06">&#34;{{ $img.RelPermalink }}&#34;</span> <span style="color:#ce5c00;font-weight:bold">/</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#ce5c00;font-weight:bold">/</span><span style="color:#000">figure</span><span style="color:#000;font-weight:bold">&gt;</span>
</code></pre></div><h2 id="tema-sencillo-pare-test">Tema sencillo pare test</h2>
<p><a href="https://github.com/zwbetz-gh/vanilla-bootstrap-hugo-theme">https://github.com/zwbetz-gh/vanilla-bootstrap-hugo-theme</a></p>
<h2 id="trabajando-con-ficheros-de-datos">Trabajando con ficheros de datos:</h2>
<p><code>data/socialmedia.json</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="color:#000;font-weight:bold">{</span> <span style="color:#a40000">​</span> <span style="color:#204a87;font-weight:bold">&#34;accounts&#34;</span><span style="color:#a40000">​</span> <span style="color:#000;font-weight:bold">:</span>
  <span style="color:#000;font-weight:bold">[</span>
    <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#204a87;font-weight:bold">&#34;name&#34;</span><span style="color:#a40000">​</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#a40000">​</span> <span style="color:#4e9a06">&#34;Twitter&#34;</span><span style="color:#a40000">​</span> <span style="color:#000;font-weight:bold">,</span>
      <span style="color:#204a87;font-weight:bold">&#34;url&#34;</span><span style="color:#a40000">​</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#a40000">​</span> <span style="color:#4e9a06">&#34;https://twitter.com/bphogan&#34;</span>
    <span style="color:#000;font-weight:bold">},</span>
    <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#204a87;font-weight:bold">&#34;name&#34;</span><span style="color:#a40000">​</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#a40000">​</span> <span style="color:#4e9a06">&#34;LinkedIn&#34;</span><span style="color:#a40000">​</span> <span style="color:#000;font-weight:bold">,</span>
      <span style="color:#204a87;font-weight:bold">&#34;url&#34;</span><span style="color:#a40000">​</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#a40000">​</span> <span style="color:#4e9a06">&#34;https://linkedin.com/in/bphogan&#34;</span>
    <span style="color:#000;font-weight:bold">}</span>
  <span style="color:#000;font-weight:bold">]</span>
<span style="color:#000;font-weight:bold">}</span>
</code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go-html-template" data-lang="go-html-template"><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">h3</span><span style="color:#000;font-weight:bold">&gt;</span>Social Media<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">h3</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">ul</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">range</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.Site.Data.socialmedia.accounts</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">li</span><span style="color:#000;font-weight:bold">&gt;&lt;</span><span style="color:#204a87;font-weight:bold">a</span> <span style="color:#c4a000">href</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">​</span> <span style="color:#a40000">&#34;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.url</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#a40000">&#34;​</span> <span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#c4a000">.name</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">a</span><span style="color:#000;font-weight:bold">&gt;&lt;/</span><span style="color:#204a87;font-weight:bold">li</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">end</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">ul</span><span style="color:#000;font-weight:bold">&gt;</span>
</code></pre></div><p><strong>Ejemplo csv remoto</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go-html-template" data-lang="go-html-template"><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">table</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">thead</span><span style="color:#000;font-weight:bold">&gt;</span>
      <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">tr</span><span style="color:#000;font-weight:bold">&gt;</span>
      <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">th</span><span style="color:#000;font-weight:bold">&gt;</span>Name<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">th</span><span style="color:#000;font-weight:bold">&gt;</span>
      <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">th</span><span style="color:#000;font-weight:bold">&gt;</span>Position<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">th</span><span style="color:#000;font-weight:bold">&gt;</span>
      <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">th</span><span style="color:#000;font-weight:bold">&gt;</span>Salary<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">th</span><span style="color:#000;font-weight:bold">&gt;</span>
      <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">tr</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">thead</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">tbody</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$url</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">:=</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;https://example.com/finance/employee-salaries.csv&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
    <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$sep</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">:=</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#34;,&#34;</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
    <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">range</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$i</span><span style="color:#ce5c00;font-weight:bold">,</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$r</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#ce5c00;font-weight:bold">:=</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">getCSV</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$sep</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$url</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
      <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">tr</span><span style="color:#000;font-weight:bold">&gt;</span>
        <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">td</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">index</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$r</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">0</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">td</span><span style="color:#000;font-weight:bold">&gt;</span>
        <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">td</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">index</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$r</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">1</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">td</span><span style="color:#000;font-weight:bold">&gt;</span>
        <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">td</span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">index</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">$r</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">2</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span><span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">td</span><span style="color:#000;font-weight:bold">&gt;</span>
      <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">tr</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#8f5902;font-style:italic">{{</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">end</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#8f5902;font-style:italic">}}</span>
    <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">tbody</span><span style="color:#000;font-weight:bold">&gt;</span>
  <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">table</span><span style="color:#000;font-weight:bold">&gt;</span>
</code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-09be1c9d92839611ca50ed89286c80ea">2.10 - Configuración GDPR</h1>
    
	

<div class="pageinfo pageinfo-primary">
<p>Configurar Hugo para General Data Protection Regulation (GDPR)</p>
<p><a href="https://gohugo.io/about/hugo-and-gdpr/">https://gohugo.io/about/hugo-and-gdpr/</a></p>

</div>

<p>Por defecto:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#204a87;font-weight:bold">privacy</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">disqus</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">disable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">googleAnalytics</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">anonymizeIP</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">disable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">respectDoNotTrack</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">useSessionStorage</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">instagram</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">disable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">simple</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">twitter</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">disable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">enableDNT</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">simple</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">vimeo</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">disable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">enableDNT</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">simple</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">youtube</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">disable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">privacyEnhanced</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">false</span><span style="color:#f8f8f8;text-decoration:underline">
</span></code></pre></div><p>Para deshabilitar servicios:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#204a87;font-weight:bold">privacy</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">disqus</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">disable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">googleAnalytics</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">disable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">instagram</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">disable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">twitter</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">disable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">vimeo</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">disable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">youtube</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">disable</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#000">```</span></code></pre></div>
</div>



    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-65fa7948f76f2ce62365a1ccd185ebec">3 - Inmersión en Python</h1>
    <div class="lead">Inmersión a la programación con Python</div>
	

<div class="pageinfo pageinfo-primary">
<p>Primeros pasos:</p>
<ul>
<li>Instalar python (windows)</li>
<li>Instalar pip <a href="https://pip.pypa.io/en/stable/installation/">https://pip.pypa.io/en/stable/installation/</a></li>
<li>Instalar extensión VS Code Python</li>
<li>Algunas extensiones interesantes para iniciar</li>
</ul>

</div>

<h2 id="documentación-básica">Documentación básica</h2>
<ul>
<li><a href="https://www.python.org/">https://www.python.org/</a></li>
<li><a href="https://docs.python.org/3/">https://docs.python.org/3/</a></li>
</ul>
<h2 id="documentación-de-instalación">Documentación de instalación</h2>
<ul>
<li><a href="https://code.visualstudio.com/docs/python/python-tutorial">https://code.visualstudio.com/docs/python/python-tutorial</a></li>
</ul>
<h2 id="introducción">Introducción</h2>
<ul>
<li><a href="https://docs.python.org/es/3/tutorial/introduction.html">https://docs.python.org/es/3/tutorial/introduction.html</a></li>
</ul>
<h2 id="cuadernos-de-tutoriales-y-ejercicios">Cuadernos de tutoriales y ejercicios</h2>
<ul>
<li><a href="https://github.com/lmorillas/Introduccion-Python-3">https://github.com/lmorillas/Introduccion-Python-3</a></li>
</ul>
<h3 id="secuencia-propuesta">Secuencia propuesta:</h3>
<ul>
<li>Strings</li>
<li>Numbers</li>
<li>Conditionals</li>
<li>Listas</li>
<li>Dictionaries</li>
<li>For loops</li>
<li>Functions</li>
<li>File I/O</li>
<li>Classes</li>
<li>Modules y packages</li>
<li>Virtual environment</li>
</ul>

</div>



    
      
  
  
  
  

  
  

  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-970191280c282b0d06b36c39f701f000">4 - Django</h1>
    <div class="lead">Desarrollo web con Django: &ldquo;The web framework for perfectionists with deadlines&rdquo;</div>
	<h2 id="documentación-base">Documentación base</h2>
<ul>
<li><a href="https://docs.djangoproject.com/en/3.2/">https://docs.djangoproject.com/en/3.2/</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django">https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django</a></li>
</ul>
<h3 id="sitios-con-tutoriales">Sitios con tutoriales</h3>
<ul>
<li><a href="https://realpython.com/tutorials/django/">https://realpython.com/tutorials/django/</a></li>
</ul>
<h3 id="charlas">Charlas</h3>
<ul>
<li><a href="https://2021.djangocon.us/">https://2021.djangocon.us/</a></li>
<li><a href="https://2021.djangocon.eu">https://2021.djangocon.eu</a></li>
</ul>

</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-e59ea48a29e5573048bff80b7d69ac7b">4.1 - Instalación</h1>
    <div class="lead">Instalación entorno</div>
	

<div class="pageinfo pageinfo-primary">
<p>Instalación y configuración del entorno para desarrollo:</p>
<ul>
<li><a href="https://docs.djangoproject.com/en/3.2/intro/install/">https://docs.djangoproject.com/en/3.2/intro/install/</a></li>
<li><a href="https://code.visualstudio.com/docs/python/tutorial-django">https://code.visualstudio.com/docs/python/tutorial-django</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/development_environment">https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/development_environment</a></li>
</ul>

</div>

<h2 id="instalación-de-python">Instalación de Python</h2>
<ul>
<li>Versión de python? <a href="https://docs.djangoproject.com/en/3.2/faq/install/#faq-python-version-support">https://docs.djangoproject.com/en/3.2/faq/install/#faq-python-version-support</a></li>
<li><a href="https://www.python.org/downloads/">https://www.python.org/downloads/</a></li>
</ul>
<h2 id="configuración-de-una-base-de-datos">Configuración de una base de datos</h2>
<p>Al inicio no será necesario. Luego podremos usar PostgreSQL, MariaDB, MySQL, Oracle (<a href="https://docs.djangoproject.com/en/3.2/topics/install/#database-installation">https://docs.djangoproject.com/en/3.2/topics/install/#database-installation</a>)</p>
<h2 id="entorno-virtual">Entorno virtual</h2>
<p>Creamos carpeta para el proyecto y dentro de esa carpeta:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># Linux</span>
sudo apt-get install python3-venv    <span style="color:#8f5902;font-style:italic"># Si es necesario instalamos este módulo</span>
python3 -m venv env

<span style="color:#8f5902;font-style:italic"># macOS</span>
python3 -m venv env

<span style="color:#8f5902;font-style:italic"># Windows</span>
python -m venv env
</code></pre></div><p>Activar entorno:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># Windows</span>
env<span style="color:#4e9a06">\S</span>cripts<span style="color:#4e9a06">\a</span>ctivate.bat
<span style="color:#8f5902;font-style:italic"># linux/mac</span>
<span style="color:#204a87">source</span> tutorial-env/bin/activate

</code></pre></div><h2 id="instalación-de-django">Instalación de Django</h2>
<p>Instalación de una versión oficial: <a href="https://docs.djangoproject.com/en/3.2/topics/install/#installing-official-release">https://docs.djangoproject.com/en/3.2/topics/install/#installing-official-release</a></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># Linux / Mac</span>
$ pip install Django

<span style="color:#8f5902;font-style:italic"># Windows</span>
...<span style="color:#4e9a06">\&gt;</span> py -m pip install Django

</code></pre></div><h2 id="comprobación">Comprobación</h2>
<p>Usa el intérprete de python</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#ce5c00;font-weight:bold">&gt;&gt;&gt;</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">django</span>
<span style="color:#ce5c00;font-weight:bold">&gt;&gt;&gt;</span> <span style="color:#204a87">print</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">django</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get_version</span><span style="color:#000;font-weight:bold">())</span>
<span style="color:#0000cf;font-weight:bold">3.2</span>
</code></pre></div><h2 id="configuración-del-entorno-visual-studio-code">Configuración del entorno (Visual Studio Code)</h2>
<ul>
<li><a href="https://code.visualstudio.com/docs/python/tutorial-django">https://code.visualstudio.com/docs/python/tutorial-django</a></li>
<li><a href="https://docs.microsoft.com/es-es/visualstudio/python/learn-django-in-visual-studio-step-01-project-and-solution">https://docs.microsoft.com/es-es/visualstudio/python/learn-django-in-visual-studio-step-01-project-and-solution</a></li>
</ul>
<h2 id="browser-para-sqlite">Browser para SQLite</h2>
<ul>
<li><a href="https://sqlitebrowser.org/dl/">https://sqlitebrowser.org/dl/</a></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-7689592482baf6e198edc0b9f14914ad">4.2 - Creación de un proyecto y una app</h1>
    <div class="lead">Creación de un proyecto y una app</div>
	

<div class="pageinfo pageinfo-primary">
<p>Documentación</p>
<ul>
<li><a href="https://developer.mozilla.org/es/docs/Learn/Server-side/Django/Tutorial_local_library_website">https://developer.mozilla.org/es/docs/Learn/Server-side/Django/Tutorial_local_library_website</a></li>
<li><a href="https://docs.djangoproject.com/es/3.2/intro/tutorial01/">https://docs.djangoproject.com/es/3.2/intro/tutorial01/</a></li>
<li>Objetivo: <strong>Biblioteca</strong> <a href="https://developer.mozilla.org/es/docs/Learn/Server-side/Django/skeleton_website">https://developer.mozilla.org/es/docs/Learn/Server-side/Django/skeleton_website</a></li>
</ul>

</div>

<h2 id="creación-de-proyecto">Creación de proyecto</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ django-admin startproject biblioteca
</code></pre></div><pre tabindex="0"><code>biblioteca/
    manage.py
    bibliioteca/
        __init__.py
        settings.py
        urls.py
        asgi.py
        wsgi.py
</code></pre><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ python3 manage.py runserver
</code></pre></div><p>Parar con <code>Ctrl+C</code></p>
<h2 id="creación-aplicación">Creación aplicación</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ python3 manage.py startapp catalogo
</code></pre></div><h2 id="modelo-vista-template">Modelo Vista Template</h2>
<p>Diseño común: patrón Modelo Vista Controlador (<strong>MVC</strong>)
Django usa: <strong>MVT</strong>: Permite que las templates puedan desarrollarse en cualquier lenguaje:</p>
<ul>
<li>Modelos y Vistas se escriben en <strong>Python</strong></li>
<li>Templates se escriben en <strong>html</strong></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-f7ec2ca618dc22ad79a654aabf33d978">4.3 - Introducción a HTTP</h1>
    <div class="lead">HTTP requests &amp; responses</div>
	

<div class="pageinfo pageinfo-primary">
<p>Documentación</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP">https://developer.mozilla.org/en-US/docs/Web/HTTP</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Overview">https://developer.mozilla.org/en-US/docs/Web/HTTP/Overview</a></li>
</ul>

</div>

<h2 id="http">HTTP</h2>
<p>Djando procesa peticiones HTTP y genera respuestas HTTP</p>
<h3 id="petición">Petición</h3>
<pre tabindex="0"><code>GET / HTTP/1.1
Host: www.cpilosenlaces.com
Cache-Control: no-cache
User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/94.0.4606.81 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9
Accept-Encoding: gzip, deflate
Accept-Language: es-ES,es;q=0.9,en;q=0.8,gl;q=0.7,ca;q=0.6
Cookie: _ga=GA1.2.35175891.163;
</code></pre><p>Verbos: GET, POST, PUT, DELETE</p>
<h3 id="respuesta">Respuesta</h3>
<pre tabindex="0"><code>HTTP/1.1 200 OK
Server: nginx/1.14.1
Date: Thu, 21 Oct 2021 10:09:34 GMT
Content-Type: text/html; charset=UTF-8
Content-Length: 15482
Connection: keep-alive
Vary: Accept-Encoding
Last-Modified: Thu, 21 Oct 2021 09:54:43 GMT
ETag: &quot;3a7f-5xxx9e24f3b6f&quot;
Accept-Ranges: bytes
Cache-Control: max-age=2708
Expires: Thu, 21 Oct 2021 10:54:43 GMT
Content-Encoding: gzip

</code></pre><h3 id="status-codes">Status Codes</h3>
<ul>
<li><a href="https://es.wikipedia.org/wiki/Anexo:C%C3%B3digos_de_estado_HTTP">https://es.wikipedia.org/wiki/Anexo:C%C3%B3digos_de_estado_HTTP</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status">https://developer.mozilla.org/en-US/docs/Web/HTTP/Status</a></li>
</ul>
<ol>
<li>Respuestas informativas (100–199)</li>
<li>Respuestas satisfactorias (200–299)</li>
<li>Redirecciones (300–399)</li>
<li>Errores de los clientes (400–499)</li>
<li>Errores de los servidores (500–599)</li>
</ol>
<h3 id="requests-y-responses-en-django-opt">Requests y responses en django [opt]</h3>
<p><a href="https://docs.djangoproject.com/en/3.2/intro/tutorial01/">https://docs.djangoproject.com/en/3.2/intro/tutorial01/</a></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-d3a66753eac6c7801654aa2420407c19">4.4 - Modelos</h1>
    <div class="lead">Creación y uso de modelos</div>
	

<div class="pageinfo pageinfo-primary">
<p>Documentación:</p>
<ul>
<li><a href="https://docs.djangoproject.com/en/3.2/intro/tutorial02/">https://docs.djangoproject.com/en/3.2/intro/tutorial02/</a></li>
<li><a href="https://developer.mozilla.org/es/docs/Learn/Server-side/Django/Models">https://developer.mozilla.org/es/docs/Learn/Server-side/Django/Models</a></li>
</ul>

</div>

<p><img src="https://mdn.mozillademos.org/files/15646/local_library_model_uml.png" alt="Base de datos"></p>
<h2 id="trabajando-con-modelos">Trabajando con modelos</h2>
<ul>
<li>archivo <strong>models.py</strong></li>
<li>Argumentos comunes</li>
<li>Tipos comunes de campos</li>
</ul>
<h2 id="gestión-de-modelos">Gestión de modelos</h2>
<ul>
<li>Creación y modificación de registros</li>
<li>Búsqueda</li>
</ul>
<h2 id="tarea-definir-los-modelos-de-la-biblioteca">Tarea: Definir los modelos de la biblioteca</h2>
<ul>
<li>Género</li>
<li>Book</li>
<li>Bookinstance</li>
<li>Autor</li>
</ul>
<h2 id="migraciones">Migraciones</h2>
<h2 id="modelo-language">Modelo Language</h2>
<h2 id="fixtures">Fixtures</h2>
<ul>
<li><a href="https://github.com/graevskiy/local_library/blob/master/catalog/fixtures/dump.json">https://github.com/graevskiy/local_library/blob/master/catalog/fixtures/dump.json</a></li>
<li><a href="https://docs.djangoproject.com/en/3.2/howto/initial-data/">https://docs.djangoproject.com/en/3.2/howto/initial-data/</a></li>
<li><a href="https://docs.djangoproject.com/en/3.2/ref/django-admin/#django-admin-loaddata">https://docs.djangoproject.com/en/3.2/ref/django-admin/#django-admin-loaddata</a></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-3bc118b9dddd3032235e752834004a2d">4.5 - Sitio administrativo</h1>
    <div class="lead">Configuración del admin</div>
	

<div class="pageinfo pageinfo-primary">
<p>Documentación:</p>
<ul>
<li><a href="https://developer.mozilla.org/es/docs/Learn/Server-side/Django/Admin_site">https://developer.mozilla.org/es/docs/Learn/Server-side/Django/Admin_site</a></li>
</ul>

</div>

<h2 id="registrar-modelos">Registrar modelos</h2>
<p><strong>archivo admin.py</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">.models</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">Author</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">Genre</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">Book</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">BookInstance</span>

<span style="color:#000">admin</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">site</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">register</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Book</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000">admin</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">site</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">register</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Author</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000">admin</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">site</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">register</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Genre</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000">admin</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">site</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">register</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">BookInstance</span><span style="color:#000;font-weight:bold">)</span>
</code></pre></div><h2 id="crear-administrador">Crear Administrador</h2>
<h2 id="configurar">Configurar</h2>
<h3 id="clases-modeladmin">Clases ModelAdmin</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#8f5902;font-style:italic"># Define the admin class</span>
<span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">AuthorAdmin</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">admin</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">ModelAdmin</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#204a87;font-weight:bold">pass</span>

<span style="color:#8f5902;font-style:italic"># Register the admin class with the associated model</span>
<span style="color:#000">admin</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">site</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">register</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">Author</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">AuthorAdmin</span><span style="color:#000;font-weight:bold">)</span>
</code></pre></div><h3 id="list_display">list_display</h3>
<h3 id="list_filter">list_filter</h3>
<h3 id="fields-y-fieldsets">fields y fieldsets</h3>
<h3 id="edición">Edición</h3>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-f7a2a66d2c290e27da8655c9d9e80be3">4.6 - Página inicial</h1>
    <div class="lead">Urls, vistas, plantillas</div>
	

<div class="pageinfo pageinfo-primary">
<p>Documentación:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/Home_page">https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/Home_page</a></li>
<li><a href="https://docs.djangoproject.com/en/3.2/intro/tutorial03/">https://docs.djangoproject.com/en/3.2/intro/tutorial03/</a></li>
</ul>

</div>

<h2 id="visión-general">Visión general</h2>
<p><img src="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/Home_page/basic-django.png" alt="Proceso de una petición"></p>
<h2 id="definiendo-urls">Definiendo URLs</h2>
<p><strong>urls.py</strong> principal:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#8f5902;font-style:italic"># Redirección incial</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.views.generic</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">RedirectView</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.urls</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">include</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">path</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.contrib</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">admin</span>

<span style="color:#000">urlpatterns</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[</span>
    <span style="color:#000">path</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;admin/&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">admin</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">site</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">urls</span><span style="color:#000;font-weight:bold">),</span>
    <span style="color:#000">path</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;catalog/&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">include</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;catalog.urls&#39;</span><span style="color:#000;font-weight:bold">)),</span>
    <span style="color:#000">path</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;/&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">RedirectView</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">as_view</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">url</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;/catalog/&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">permanent</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87;font-weight:bold">True</span><span style="color:#000;font-weight:bold">)),</span>
<span style="color:#000;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">static</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">settings</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">STATIC_URL</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">document_root</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">settings</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">STATIC_ROOT</span><span style="color:#000;font-weight:bold">)</span>
</code></pre></div><p><strong>Urls de nuestra app</strong></p>
<ul>
<li>catalog/ — La página home/index.</li>
<li>catalog/books/ — La lista de todos los libros.</li>
<li>catalog/authors/ — La lista de todos los autores.</li>
<li>catalog/book/<id> — La vista detallada para el libro específico con un campo de clave primaria de <id> (el valor por defecto). Así por ejemplo, /catalog/book/3, para el tercer libro añadido.</li>
<li>catalog/author/<id> — La vista detallada para el autor específico con un campo de clave primaria llamada <id>. Así por ejemplo, /catalog/author/11, para el 11vo autor añadido.</li>
</ul>
<h2 id="crear-vista-para-pagina-inicial-del-sitio">Crear vista para pagina inicial del sitio</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
<span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">index</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">):</span>

    <span style="color:#ce5c00;font-weight:bold">...</span>
</code></pre></div><h2 id="crear-plantilla">Crear plantilla</h2>
<ul>
<li>plantilla base</li>
<li>includes</li>
<li><strong>extends</strong></li>
<li></li>
</ul>
<h2 id="django-debug-toolbar">Django Debug Toolbar</h2>
<ul>
<li><a href="https://django-debug-toolbar.readthedocs.io/en/latest/installation.html">https://django-debug-toolbar.readthedocs.io/en/latest/installation.html</a></li>
<li><code>$ pip install django-debug-toolbar </code></li>
<li>Configurar</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-7250eee326209f21f0e0ceb59b26cbf0">4.7 - Ejercicios repaso y profundización</h1>
    <div class="lead">Urls, vistas, plantillas, modelos</div>
	

<div class="pageinfo pageinfo-primary">
<p>Documentación:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/">https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/</a></li>
<li><a href="https://docs.djangoproject.com/en/3.2/intro/">https://docs.djangoproject.com/en/3.2/intro/</a></li>
</ul>

</div>

<h2 id="revisar-instalación">Revisar instalación</h2>
<ul>
<li>Entorno virtual</li>
<li>Activar e instalar django</li>
<li>Crear proyecto y app</li>
<li>Si no has creado un repositorio git, es el momento.</li>
</ul>
<h2 id="modificar-plantillas-para-página-principal">Modificar plantillas para página principal</h2>
<ul>
<li>Crea un menú (navbar) <a href="https://getbootstrap.com/docs/5.1/examples/navbars/">https://getbootstrap.com/docs/5.1/examples/navbars/</a></li>
<li>Crea una página de contacto/acerca de</li>
</ul>
<h2 id="añade-los-modelos-que-faltan">Añade los modelos que faltan</h2>
<ul>
<li>
<p>Idiomas de los libros (modelo <strong>Language</strong>)</p>
</li>
<li>
<p>Modelo <strong>Bookinstance</strong></p>
</li>
<li>
<p>Inserta unos libros
Revisa la documentación de <a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/Models">https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/Models</a></p>
</li>
<li>
<p>Añade los modelos al admin</p>
</li>
</ul>
<h2 id="página-inicial">Página inicial</h2>
<p>En la página incial se verá:</p>
<ul>
<li>El menú</li>
<li>Logo o imagen en grande de la web</li>
<li>Resumen de número de libros del catálogo y número de autores</li>
<li>Últimos libros añadidos</li>
</ul>
<h2 id="añade-una-nueva-clase-revisión-para-que-los-usuarios-puedan-valorar-un-libro">Añade una nueva clase <strong>Revisión</strong> para que los usuarios puedan valorar un libro:</h2>
<ul>
<li>
<p>Usuario. Usa el modelo <strong>User</strong> de Django:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.contrib.auth.models</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">User</span>
</code></pre></div></li>
<li>
<p>Fecha de la revisión</p>
</li>
<li>
<p>Puntuación (1-5)</p>
</li>
<li>
<p>Texto</p>
</li>
</ul>
<p>Un usuario sólo puede valorar un libro una vez. Podrá modificar su valoración.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-92f0298c6cf4c606d64aacf60fadb74e">4.8 - Vistas genéricas: listados y detalle</h1>
    <div class="lead">Vistas genéricas son una forma de crear vistas que se pueden reutilizar en diferentes proyectos.</div>
	

<div class="pageinfo pageinfo-primary">
<p>Documentación:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/Generic_views">https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/Generic_views</a></li>
<li><a href="https://docs.djangoproject.com/en/3.2/topics/class-based-views/generic-display/">https://docs.djangoproject.com/en/3.2/topics/class-based-views/generic-display/</a></li>
</ul>

</div>

<h2 id="url-mapping">URL mapping</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#000">urlpatterns</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[</span>
    <span style="color:#000">path</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">views</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">index</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;index&#39;</span><span style="color:#000;font-weight:bold">),</span>
    <span style="color:#000">path</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;books/&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">views</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">BookListView</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">as_view</span><span style="color:#000;font-weight:bold">(),</span> <span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;books&#39;</span><span style="color:#000;font-weight:bold">),</span>
<span style="color:#000;font-weight:bold">]</span>
</code></pre></div><h2 id="redirección-incial">Redirección incial</h2>
<p><strong>urls.py del proyecto</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.views.generic</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">RedirectView</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.urls</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">include</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">path</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.contrib</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">admin</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.conf.urls.static</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">static</span>


<span style="color:#000">urlpatterns</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[</span>
    <span style="color:#000">path</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;admin/&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">admin</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">site</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">urls</span><span style="color:#000;font-weight:bold">),</span>
    <span style="color:#000">path</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;catalog/&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">include</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;catalog.urls&#39;</span><span style="color:#000;font-weight:bold">)),</span>
    <span style="color:#000">path</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;/&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">RedirectView</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">as_view</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">url</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;/catalog/&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">permanent</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87;font-weight:bold">True</span><span style="color:#000;font-weight:bold">)),</span>
<span style="color:#000;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">static</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">settings</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">STATIC_URL</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">document_root</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">settings</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">STATIC_ROOT</span><span style="color:#000;font-weight:bold">)</span>

<span style="color:#8f5902;font-style:italic"># Este static es solo para DEBUG = True</span>
</code></pre></div><h2 id="genericlistview">generic.ListView</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.views</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">generic</span>

<span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">BookListView</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">generic</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">ListView</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#000">model</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Book</span>
</code></pre></div><ul>
<li>La vista genérica consultará a la base de datos para obtener todos los registros del modelo especificado (Book)</li>
<li>renderizará una plantilla ubicada en <strong>/biblioteca/catalogo/templates/catalogo/book_list.html</strong></li>
<li>Dentro de la plantilla puedes acceder a la lista de libros mediante la variable de plantilla llamada <strong>object_list</strong> O <strong>book_list</strong></li>
<li>Paginación: Añade un <strong>page_obj</strong> al contexto <a href="https://docs.djangoproject.com/en/3.2/topics/pagination/">https://docs.djangoproject.com/en/3.2/topics/pagination/</a></li>
</ul>
<p>Estos datos se pueden sobreescribir:</p>
<ul>
<li>context_object_name</li>
<li>queryset</li>
<li>template_name</li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-4aea6c81708952e0ccec3bafb3801a6d">4.9 - Formularios</h1>
    <div class="lead">Formularios</div>
	

<div class="pageinfo pageinfo-primary">
<p>Documentación:</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/Forms">https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/Forms</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/Forms">https://developer.mozilla.org/en-US/docs/Learn/Forms</a></li>
<li><a href="https://docs.djangoproject.com/en/3.2/topics/forms/">https://docs.djangoproject.com/en/3.2/topics/forms/</a></li>
</ul>

</div>

<h2 id="qué-son-los-formularios">Qué son los formularios</h2>
<p>Conjutos de etiquetas entre elementos <code>&lt;form&gt;</code> y <code>&lt;/form&gt;</code> que permiten a los usuarios enviar datos a un servidor.</p>
<h2 id="cómo-se-procesan-en-django">Cómo se procesan en django</h2>
<p><img src="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/Forms/form_handling_-_standard.png" alt="formularios en django"></p>
<h2 id="fomulario-de-búsqueda">Fomulario de búsqueda</h2>
<p>En template:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">form</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;form-inline mt-2 mt-md-0&#34;</span> 
    <span style="color:#c4a000">action</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;{% url &#39;search_results&#39; %}&#34;</span>
    <span style="color:#c4a000">method</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;get&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">input</span> <span style="color:#c4a000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;q&#34;</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;form-control mr-sm-2&#34;</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;text&#34;</span> 
        <span style="color:#c4a000">placeholder</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Search&#34;</span> <span style="color:#c4a000">aria-label</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Search&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">form</span><span style="color:#000;font-weight:bold">&gt;</span>
</code></pre></div><p>Vista de búsqueda:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">SearchResultsListView</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">ListView</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#000">model</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Book</span>
    <span style="color:#000">context_object_name</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;book_list&#39;</span>
    <span style="color:#000">template_name</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;books/search_results.html&#39;</span>
    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">get_queryset</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span> <span style="color:#8f5902;font-style:italic"># new</span>
        <span style="color:#000">query</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">GET</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;q&#39;</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">Book</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">objects</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">filter</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">title__icontains</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">query</span><span style="color:#000;font-weight:bold">)</span>
</code></pre></div><p><strong>Configurar urls.py</strong></p>
<h2 id="objetos-formsform">Objetos forms.Form</h2>
<p>Se declaran en forms.py</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">datetime</span>

<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">forms</span>

<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.core.exceptions</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">ValidationError</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.utils.translation</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">ugettext_lazy</span> <span style="color:#204a87;font-weight:bold">as</span> <span style="color:#000">_</span>

<span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">RenewBookForm</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">forms</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Form</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#000">renewal_date</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">forms</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">DateField</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">help_text</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Enter a date between now and 4 weeks (default 3).&#34;</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">clean_renewal_date</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#000">data</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">cleaned_data</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;renewal_date&#39;</span><span style="color:#000;font-weight:bold">]</span>

        <span style="color:#8f5902;font-style:italic"># Check if a date is not in the past.</span>
        <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">data</span> <span style="color:#ce5c00;font-weight:bold">&lt;</span> <span style="color:#000">datetime</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">date</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">today</span><span style="color:#000;font-weight:bold">():</span>
            <span style="color:#204a87;font-weight:bold">raise</span> <span style="color:#000">ValidationError</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">_</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;Invalid date - renewal in past&#39;</span><span style="color:#000;font-weight:bold">))</span>

        <span style="color:#8f5902;font-style:italic"># Check if a date is in the allowed range (+4 weeks from today).</span>
        <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">data</span> <span style="color:#ce5c00;font-weight:bold">&gt;</span> <span style="color:#000">datetime</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">date</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">today</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">datetime</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">timedelta</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">weeks</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">4</span><span style="color:#000;font-weight:bold">):</span>
            <span style="color:#204a87;font-weight:bold">raise</span> <span style="color:#000">ValidationError</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">_</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;Invalid date - renewal more than 4 weeks ahead&#39;</span><span style="color:#000;font-weight:bold">))</span>

        <span style="color:#8f5902;font-style:italic"># Remember to always return the cleaned data.</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">data</span>    
</code></pre></div><p><strong>Uso: urs.py, views.py y templates</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">datetime</span>

<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.shortcuts</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">render</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">get_object_or_404</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.http</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">HttpResponseRedirect</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.urls</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">reverse</span>

<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">catalog.forms</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">RenewBookForm</span>

<span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">renew_book_librarian</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">pk</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#000">book_instance</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">get_object_or_404</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">BookInstance</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">pk</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">pk</span><span style="color:#000;font-weight:bold">)</span>

    <span style="color:#8f5902;font-style:italic"># If this is a POST request then process the Form data</span>
    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">method</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#4e9a06">&#39;POST&#39;</span><span style="color:#000;font-weight:bold">:</span>

        <span style="color:#8f5902;font-style:italic"># Create a form instance and populate it with data from the request (binding):</span>
        <span style="color:#000">form</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">RenewBookForm</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">)</span>

        <span style="color:#8f5902;font-style:italic"># Check if the form is valid:</span>
        <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">form</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">is_valid</span><span style="color:#000;font-weight:bold">():</span>
            <span style="color:#8f5902;font-style:italic"># process the data in form.cleaned_data as required (here we just write it to the model due_back field)</span>
            <span style="color:#000">book_instance</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">due_back</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">form</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">cleaned_data</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;renewal_date&#39;</span><span style="color:#000;font-weight:bold">]</span>
            <span style="color:#000">book_instance</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">save</span><span style="color:#000;font-weight:bold">()</span>

            <span style="color:#8f5902;font-style:italic"># redirect to a new URL:</span>
            <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">HttpResponseRedirect</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">reverse</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;all-borrowed&#39;</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#000;font-weight:bold">)</span>

    <span style="color:#8f5902;font-style:italic"># If this is a GET (or any other method) create the default form.</span>
    <span style="color:#204a87;font-weight:bold">else</span><span style="color:#000;font-weight:bold">:</span>
        <span style="color:#000">proposed_renewal_date</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">datetime</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">date</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">today</span><span style="color:#000;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#000">datetime</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">timedelta</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">weeks</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">3</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#000">form</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">RenewBookForm</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">initial</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#39;renewal_date&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">proposed_renewal_date</span><span style="color:#000;font-weight:bold">})</span>

    <span style="color:#000">context</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#4e9a06">&#39;form&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">form</span><span style="color:#000;font-weight:bold">,</span>
        <span style="color:#4e9a06">&#39;book_instance&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">book_instance</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">render</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;catalog/book_renew_librarian.html&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">context</span><span style="color:#000;font-weight:bold">)</span>
</code></pre></div><h2 id="modelforms">ModelForms</h2>
<p>Heredan de ModelForm</p>
<h2 id="vistas-genéricas-de-edición">Vistas genéricas de edición</h2>
<ul>
<li><strong>CreateView</strong></li>
<li><strong>UpdateView</strong></li>
<li><strong>DeleteView</strong></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-93c163464508e198441e4f1b5692bcef">4.10 - Formularios - Crispy</h1>
    <div class="lead">Formularios con Crispy</div>
	

<div class="pageinfo pageinfo-primary">
<p>Documentación oficial:</p>
<ul>
<li><a href="https://django-crispy-forms.readthedocs.io/en/latest/">https://django-crispy-forms.readthedocs.io/en/latest/</a></li>
<li><a href="https://github.com/django-crispy-forms/django-crispy-forms">https://github.com/django-crispy-forms/django-crispy-forms</a></li>
</ul>
<p>Tutoriales:</p>
<ul>
<li><a href="https://simpleisbetterthancomplex.com/tutorial/2018/11/28/advanced-form-rendering-with-django-crispy-forms.html">https://simpleisbetterthancomplex.com/tutorial/2018/11/28/advanced-form-rendering-with-django-crispy-forms.html</a></li>
<li><a href="https://www.merixstudio.com/blog/django-crispy-forms-what-are-they-about/">https://www.merixstudio.com/blog/django-crispy-forms-what-are-they-about/</a></li>
<li><a href="https://dontrepeatyourself.org/post/django-forms-django-crispy-forms/">https://dontrepeatyourself.org/post/django-forms-django-crispy-forms/</a></li>
</ul>

</div>

<h2 id="situación">Situación</h2>
<p>Cuando nace <strong>Django</strong> internet era mucho más simple. No existían los UI toolkits como Boostrap. A partir de 2009 se empieza a trabajar en lo que ahora es <strong>Crispy Forms</strong>, que mejora la creación y presentación de formularios.</p>
<h2 id="instalación">Instalación</h2>
<p><a href="https://django-crispy-forms.readthedocs.io/en/latest/install.html">https://django-crispy-forms.readthedocs.io/en/latest/install.html</a></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pip install django-crispy-forms
</code></pre></div><p><strong>Configuración de Django</strong></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#000">INSTALLED_APPS</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">(</span>
    <span style="color:#ce5c00;font-weight:bold">...</span>
    <span style="color:#4e9a06">&#39;crispy_forms&#39;</span><span style="color:#000;font-weight:bold">,</span>
<span style="color:#000;font-weight:bold">)</span>
</code></pre></div><p>Se pueden usar distintos <strong>template packs</strong> <a href="https://django-crispy-forms.readthedocs.io/en/latest/install.html#template-packs">https://django-crispy-forms.readthedocs.io/en/latest/install.html#template-packs</a></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#8f5902;font-style:italic"># en settings.py</span>
<span style="color:#000">CRISPY_TEMPLATE_PACK</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;bootstrap4&#39;</span>
</code></pre></div><h2 id="uso">Uso</h2>
<h3 id="crispy-filter">Crispy Filter</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">{% load crispy_forms_tags %}

<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">form</span> <span style="color:#c4a000">method</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;post&#34;</span> <span style="color:#c4a000">class</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;uniForm&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
    {{ my_formset|crispy }}
<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">form</span><span style="color:#000;font-weight:bold">&gt;</span>
</code></pre></div><h3 id="-crispy--tag">{% crispy %} tag</h3>
<ul>
<li><a href="https://django-crispy-forms.readthedocs.io/en/latest/crispy_tag_forms.html">https://django-crispy-forms.readthedocs.io/en/latest/crispy_tag_forms.html</a></li>
<li><a href="https://django-crispy-forms.readthedocs.io/en/latest/form_helper.html">https://django-crispy-forms.readthedocs.io/en/latest/form_helper.html</a></li>
</ul>
<p>Podemos incluir el formulario y un <strong>helper</strong> que dirige su presentación.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">{% load crispy_forms_tags %}


{% crispy form  %}
</code></pre></div><h2 id="layouts">Layouts</h2>
<ul>
<li><a href="https://django-crispy-forms.readthedocs.io/en/latest/layouts.html">https://django-crispy-forms.readthedocs.io/en/latest/layouts.html</a></li>
<li>Ejemplos de uso:
** <a href="https://github.com/sibtc/advanced-crispy-forms-examples/blob/master/mysite/core/forms.py">https://github.com/sibtc/advanced-crispy-forms-examples/blob/master/mysite/core/forms.py</a>
** <a href="https://github.com/s-kust/django-advanced-forms">https://github.com/s-kust/django-advanced-forms</a></li>
<li></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-71d1aa01c08df445ed6924d82d558a11">4.11 - Sesiones</h1>
    <div class="lead">Gestión de sesiones</div>
	

<div class="pageinfo pageinfo-primary">
<ul>
<li><a href="https://docs.djangoproject.com/en/3.1/topics/http/sessions/">https://docs.djangoproject.com/en/3.1/topics/http/sessions/</a></li>
<li><a href="https://developer.mozilla.org/es/docs/Learn/Server-side/Django/Sessions">https://developer.mozilla.org/es/docs/Learn/Server-side/Django/Sessions</a></li>
</ul>

</div>

<h2 id="habilitar-sesiones">Habilitar sesiones</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#000">INSTALLED_APPS</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[</span>
    <span style="color:#ce5c00;font-weight:bold">...</span>
    <span style="color:#4e9a06">&#39;django.contrib.sessions&#39;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#ce5c00;font-weight:bold">....</span>

<span style="color:#000">MIDDLEWARE</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[</span>
    <span style="color:#ce5c00;font-weight:bold">...</span>
    <span style="color:#4e9a06">&#39;django.contrib.sessions.middleware.SessionMiddleware&#39;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#ce5c00;font-weight:bold">....</span>
</code></pre></div><h2 id="ejemplo-contador-de-visitas">Ejemplo: contador de visitas</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">index</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#ce5c00;font-weight:bold">...</span>
    
    <span style="color:#8f5902;font-style:italic"># Number of visits to this view, as counted in the session variable.</span>
    <span style="color:#000">num_visits</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">session</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;num_visits&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">0</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">session</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;num_visits&#39;</span><span style="color:#000;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">num_visits</span> <span style="color:#ce5c00;font-weight:bold">+</span> <span style="color:#0000cf;font-weight:bold">1</span>

    <span style="color:#000">context</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#4e9a06">&#39;num_visits&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">num_visits</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000;font-weight:bold">}</span>

    <span style="color:#8f5902;font-style:italic"># Render the HTML template index.html with the data in the context variable.</span>
    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">render</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;index.html&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">context</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">context</span><span style="color:#000;font-weight:bold">)</span>
</code></pre></div><h2 id="configuración">Configuración</h2>
<ul>
<li>Database sessions (por defecto)</li>
<li>File-based sessions</li>
<li>Cached sessions</li>
<li>Cookie-based sessions
<ul>
<li>SESSION_COOKIE_AGE</li>
<li>SESSION_COOKIE_DOMAIN</li>
<li>SESSION_COOKIE_SECURE</li>
<li>SESSION_EXPIRE_AT_BROWSER_CLOSE</li>
<li>SESSION_SAVE_EVERY_REQUEST</li>
<li>SESSION_COOKIE_HTTPONLY (para evitar acceso desde javascript)</li>
</ul>
</li>
</ul>
<p>Mejores prestaciones: cache-based sessions (Memcached, Redis).</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-8784277a302316f7bd7cd79cc3d15542">4.12 - Autenticación y permisos</h1>
    <div class="lead">Autenticación y permisos</div>
	

<div class="pageinfo pageinfo-primary">
<ul>
<li><a href="https://docs.djangoproject.com/en/3.1/topics/http/sessions/">https://docs.djangoproject.com/en/3.1/topics/http/sessions/</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/Authentication">https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/Authentication</a></li>
<li><a href="https://learndjango.com/tutorials/django-login-and-logout-tutorial">https://learndjango.com/tutorials/django-login-and-logout-tutorial</a></li>
</ul>

</div>

<h2 id="habilitar-autenticación">Habilitar autenticación</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#000">NSTALLED_APPS</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[</span>
    <span style="color:#ce5c00;font-weight:bold">...</span>
    <span style="color:#4e9a06">&#39;django.contrib.auth&#39;</span><span style="color:#000;font-weight:bold">,</span>  <span style="color:#8f5902;font-style:italic">#Core authentication framework and its default models.</span>
    <span style="color:#4e9a06">&#39;django.contrib.contenttypes&#39;</span><span style="color:#000;font-weight:bold">,</span>  <span style="color:#8f5902;font-style:italic">#Django content type system (allows permissions to be associated with models).</span>
    <span style="color:#ce5c00;font-weight:bold">....</span>

<span style="color:#000">MIDDLEWARE</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">[</span>
    <span style="color:#ce5c00;font-weight:bold">...</span>
    <span style="color:#4e9a06">&#39;django.contrib.sessions.middleware.SessionMiddleware&#39;</span><span style="color:#000;font-weight:bold">,</span>  <span style="color:#8f5902;font-style:italic">#Manages sessions across requests</span>
    <span style="color:#ce5c00;font-weight:bold">...</span>
    <span style="color:#4e9a06">&#39;django.contrib.auth.middleware.AuthenticationMiddleware&#39;</span><span style="color:#000;font-weight:bold">,</span>  <span style="color:#8f5902;font-style:italic">#Associates users with requests using sessions.</span>
    <span style="color:#ce5c00;font-weight:bold">....</span>
</code></pre></div><h2 id="creación-de-usuarios-y-grupos">Creación de usuarios y grupos</h2>
<p>Podemos usar el admin</p>
<h3 id="urls">Urls</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#000">urlpatterns</span> <span style="color:#ce5c00;font-weight:bold">+=</span> <span style="color:#000;font-weight:bold">[</span>
    <span style="color:#000">path</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;accounts/&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">include</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;django.contrib.auth.urls&#39;</span><span style="color:#000;font-weight:bold">)),</span>
<span style="color:#000;font-weight:bold">]</span>
</code></pre></div><h2 id="login_url">LOGIN_URL</h2>
<p>Por defecto: <strong>'/accounts/login/'</strong></p>
<ul>
<li>Escribir templates: <strong>&lsquo;registration/login.html&rsquo;</strong> dentro de la carpeta del proyecto.</li>
<li>Hay que tener configurada la búsqueda de templates en <strong>settings.py</strong>  <a href="https://github.com/lmorillas/biblioteca/blob/main/biblioteca/settings.py#L63">https://github.com/lmorillas/biblioteca/blob/main/biblioteca/settings.py#L63</a></li>
</ul>
<h2 id="logout">LOGOUT</h2>
<p>Se puede configurar LOGOUT_REDIRECT_URL en settings.py o facilitar la plantilla  <strong>&lsquo;registration/logged_out.html&rsquo;</strong> que responde a la acción de logout.</p>
<h2 id="forzar-login">Forzar login</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.conf</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">settings</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.shortcuts</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">redirect</span>

<span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">my_view</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#204a87;font-weight:bold">not</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">user</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">is_authenticated</span><span style="color:#000;font-weight:bold">:</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">redirect</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;</span><span style="color:#4e9a06">%s</span><span style="color:#4e9a06">?next=</span><span style="color:#4e9a06">%s</span><span style="color:#4e9a06">&#39;</span> <span style="color:#ce5c00;font-weight:bold">%</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#000">settings</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">LOGIN_URL</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">path</span><span style="color:#000;font-weight:bold">))</span>
    <span style="color:#8f5902;font-style:italic"># ...</span>
</code></pre></div><p>Decorador:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.contrib.auth.decorators</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">login_required</span>

<span style="color:#5c35cc;font-weight:bold">@login_required</span>
<span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">my_view</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#ce5c00;font-weight:bold">...</span>
</code></pre></div><p>Con vistas genéricas:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.contrib.auth.mixins</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">LoginRequiredMixin</span>

<span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">MyView</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">LoginRequiredMixin</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">View</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#000">login_url</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;/login/&#39;</span>
    <span style="color:#000">redirect_field_name</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;redirect_to&#39;</span>

</code></pre></div><p>Usuarios qeu pasan un test:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.shortcuts</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">redirect</span>

<span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">my_view</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#204a87;font-weight:bold">not</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">user</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">email</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">endswith</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;@example.com&#39;</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">redirect</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;/login/?next=</span><span style="color:#4e9a06">%s</span><span style="color:#4e9a06">&#39;</span> <span style="color:#ce5c00;font-weight:bold">%</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">path</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#8f5902;font-style:italic"># ...</span>


<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.contrib.auth.mixins</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">UserPassesTestMixin</span>

<span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">MyView</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">UserPassesTestMixin</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">View</span><span style="color:#000;font-weight:bold">):</span>

    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">test_func</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">user</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">email</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">endswith</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;@example.com&#39;</span><span style="color:#000;font-weight:bold">)</span>

</code></pre></div><h2 id="permisos">Permisos</h2>
<p><a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/Authentication#permissions">https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/Authentication#permissions</a></p>
<p>Podemos detallar permisos en los modelos y después usarlos en las vistas:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.contrib.auth.decorators</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">permission_required</span>

<span style="color:#5c35cc;font-weight:bold">@permission_required</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;catalog.can_mark_returned&#39;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#5c35cc;font-weight:bold">@permission_required</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;catalog.can_edit&#39;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">my_view</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#ce5c00;font-weight:bold">...</span>



<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.contrib.auth.mixins</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">PermissionRequiredMixin</span>

<span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">MyView</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">PermissionRequiredMixin</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">View</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#000">permission_required</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;catalog.can_mark_returned&#39;</span>
    <span style="color:#8f5902;font-style:italic"># Or multiple permissions</span>
    <span style="color:#000">permission_required</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;catalog.can_mark_returned&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;catalog.can_edit&#39;</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#8f5902;font-style:italic"># Note that &#39;catalog.can_edit&#39; is just an example</span>
    <span style="color:#8f5902;font-style:italic"># the catalog application doesn&#39;t have such permission!</span>

</code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-5a2cce7f0df84a85e1d26ffd7785cd94">4.13 - Subida de archivos</h1>
    <div class="lead">Subida de archivos</div>
	

<div class="pageinfo pageinfo-primary">
<p>Documentación:</p>
<ul>
<li><a href="https://docs.djangoproject.com/en/3.2/topics/files/">https://docs.djangoproject.com/en/3.2/topics/files/</a></li>
</ul>

</div>

<h2 id="configuración">Configuración</h2>
<p>Django usa STACIT_ROOT y STATIC_URL para servir lso archivos estáticos (css, js, assets).
Para los archivos que se suben de forma dinámica:</p>
<ul>
<li>MEDIA_ROOT</li>
<li>MEDIA_URL</li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#000">MEDIA_ROOT</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">os</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">path</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">join</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">BASE_DIR</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;media&#39;</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#000">MEDIA_URL</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;/media/&#39;</span>
</code></pre></div><p>En templates:
<code>django.template.context_processors.media</code></p>
<h2 id="servidor-en-desarrollo">Servidor en desarrollo</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">settings</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">DEBUG</span><span style="color:#000;font-weight:bold">:</span>
    <span style="color:#000">urlpatterns</span> <span style="color:#ce5c00;font-weight:bold">+=</span> <span style="color:#000">static</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">settings</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">MEDIA_URL</span><span style="color:#000;font-weight:bold">,</span> 
               <span style="color:#000">document_root</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">settings</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">MEDIA_ROOT</span><span style="color:#000;font-weight:bold">)</span>
</code></pre></div><h2 id="test">Test</h2>
<p>Subir un estático a mano y comprobar que se ve en el servidor.</p>
<h2 id="subida-de-archivos-con-formularios">Subida de archivos con formularios</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">form</span> <span style="color:#c4a000">action</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;{% url &#39;upload&#39; %}&#34;</span> <span style="color:#c4a000">method</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;post&#34;</span> <span style="color:#c4a000">enctype</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;multipart/form-data&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">input</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;file&#34;</span> <span style="color:#c4a000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;file&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">input</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;submit&#34;</span> <span style="color:#c4a000">value</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Upload&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">form</span><span style="color:#000;font-weight:bold">&gt;</span>
</code></pre></div><h2 id="trabajar-con-archivos-en-una-vista">Trabajar con archivos en una vista</h2>
<p>El contenido llega en <code>request.FILES</code></p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">with</span> <span style="color:#204a87">open</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">os</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">path</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">join</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">settings</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">MEDIA_ROOT</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;archivo.txt&#39;</span><span style="color:#000;font-weight:bold">),</span> <span style="color:#4e9a06">&#39;wb+&#39;</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#204a87;font-weight:bold">as</span> <span style="color:#000">destination</span><span style="color:#000;font-weight:bold">:</span>
    <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000">chunk</span> <span style="color:#204a87;font-weight:bold">in</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FILES</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;file&#39;</span><span style="color:#000;font-weight:bold">]</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">chunks</span><span style="color:#000;font-weight:bold">():</span>
        <span style="color:#000">destination</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">write</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">chunk</span><span style="color:#000;font-weight:bold">)</span>
</code></pre></div><h2 id="problema-de-seguridad">Problema de seguridad</h2>
<p>El navegador da unos valores:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#000">upload</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FILES</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;file&#39;</span><span style="color:#000;font-weight:bold">]</span>
<span style="color:#000">size</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">upload</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">sizecontent</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FILES</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;file&#39;</span><span style="color:#000;font-weight:bold">]</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">read</span><span style="color:#000;font-weight:bold">()</span>
<span style="color:#000">name</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">upload</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">name</span>
<span style="color:#000">content_type</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">upload</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">content_type</span>
<span style="color:#000">charset</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">upload</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">charset</span>
</code></pre></div><p>¿Entorno de confianza?</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">mimetypes</span>

<span style="color:#000">upload</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FILES</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;file&#39;</span><span style="color:#000;font-weight:bold">]</span>
<span style="color:#000">mimetype</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">encoding</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">mimetypes</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">guess_type</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">upload</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">name</span><span style="color:#000;font-weight:bold">)</span>
<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">mimetype</span> <span style="color:#204a87;font-weight:bold">is</span> <span style="color:#204a87;font-weight:bold">None</span> <span style="color:#204a87;font-weight:bold">or</span> <span style="color:#204a87;font-weight:bold">not</span> <span style="color:#000">mimetype</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">startswith</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;image/&#39;</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#204a87;font-weight:bold">raise</span> <span style="color:#ce5c00;font-weight:bold">...</span>
</code></pre></div><h2 id="ejemplo-vista-sencilla">Ejemplo vista sencilla</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.conf</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">settings</span>

<span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">vista_ejemplo</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">method</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#4e9a06">&#39;POST&#39;</span><span style="color:#000;font-weight:bold">:</span>
        <span style="color:#000">save_path</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">os</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">path</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">join</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">settings</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">MEDIA_ROOT</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FILES</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#34;file_upload&#34;</span><span style="color:#000;font-weight:bold">]</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">name</span><span style="color:#000;font-weight:bold">)</span>

        <span style="color:#204a87;font-weight:bold">with</span> <span style="color:#204a87">open</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">save_path</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;wb&#34;</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#204a87;font-weight:bold">as</span> <span style="color:#000">output_file</span><span style="color:#000;font-weight:bold">:</span>
            <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000">chunk</span> <span style="color:#204a87;font-weight:bold">in</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FILES</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#34;file_upload&#34;</span><span style="color:#000;font-weight:bold">]</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">chunks</span><span style="color:#000;font-weight:bold">():</span>
                <span style="color:#000">output_file</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">write</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">chunk</span><span style="color:#000;font-weight:bold">)</span>

    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">render</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;media-example.html&#34;</span><span style="color:#000;font-weight:bold">)</span>
</code></pre></div><h2 id="uso-con-django-forms">Uso con Django Forms</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">forms</span>

<span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">UploadForm</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">forms</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Form</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#000">file_upload</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">forms</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FileField</span><span style="color:#000;font-weight:bold">()</span>
</code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">os</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.conf</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">settings</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.shortcuts</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">render</span>

<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">.forms</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">UploadForm</span>

<span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">media_example</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">method</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#4e9a06">&#39;POST&#39;</span><span style="color:#000;font-weight:bold">:</span>
        <span style="color:#000">form</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">UploadForm</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FILES</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">form</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">is_valid</span><span style="color:#000;font-weight:bold">():</span>
            <span style="color:#000">save_path</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">os</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">path</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">join</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">settings</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">MEDIA_ROOT</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">form</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">cleaned_data</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#34;file_upload&#34;</span><span style="color:#000;font-weight:bold">]</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">name</span><span style="color:#000;font-weight:bold">)</span>

            <span style="color:#204a87;font-weight:bold">with</span> <span style="color:#204a87">open</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">save_path</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;wb&#34;</span><span style="color:#000;font-weight:bold">)</span> <span style="color:#204a87;font-weight:bold">as</span> <span style="color:#000">output_file</span><span style="color:#000;font-weight:bold">:</span>
                <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000">chunk</span> <span style="color:#204a87;font-weight:bold">in</span> <span style="color:#000">form</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">cleaned_data</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#34;file_upload&#34;</span><span style="color:#000;font-weight:bold">]</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">chunks</span><span style="color:#000;font-weight:bold">():</span>
                    <span style="color:#000">output_file</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">write</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">chunk</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#204a87;font-weight:bold">else</span><span style="color:#000;font-weight:bold">:</span>
        <span style="color:#000">form</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">UploadForm</span><span style="color:#000;font-weight:bold">()</span>

    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">render</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;media-example.html&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;form&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">form</span><span style="color:#000;font-weight:bold">})</span>
</code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">form</span> <span style="color:#c4a000">method</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;post&#34;</span> <span style="color:#c4a000">enctype</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;multipart/form-data&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
        {% csrf_token %}
        {{ form.as_p }}
        <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">button</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;submit&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Submit<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">button</span><span style="color:#000;font-weight:bold">&gt;</span>
<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">form</span><span style="color:#000;font-weight:bold">&gt;</span>
</code></pre></div><h2 id="imágenes-con-django-forms">Imágenes con Django Forms</h2>
<p>Instalar Pillow</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">UploadForm</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">forms</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Form</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#000">file_upload</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">forms</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">ImageField</span><span style="color:#000;font-weight:bold">()</span>
</code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">os</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">PIL</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">Image</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.conf</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">settings</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.shortcuts</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">render</span>

<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">.forms</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">UploadForm</span>

<span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">media_example</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">method</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#4e9a06">&#39;POST&#39;</span><span style="color:#000;font-weight:bold">:</span>
        <span style="color:#000">form</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">UploadForm</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FILES</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">form</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">is_valid</span><span style="color:#000;font-weight:bold">():</span>
            <span style="color:#000">save_path</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">os</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">path</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">join</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">settings</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">MEDIA_ROOT</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">form</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">cleaned_data</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#34;file_upload&#34;</span><span style="color:#000;font-weight:bold">]</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">name</span><span style="color:#000;font-weight:bold">)</span>

            <span style="color:#000">image</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Image</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">open</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">form</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">cleaned_data</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#34;file_upload&#34;</span><span style="color:#000;font-weight:bold">])</span>
            <span style="color:#000">image</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">thumbnail</span><span style="color:#000;font-weight:bold">((</span><span style="color:#0000cf;font-weight:bold">50</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">50</span><span style="color:#000;font-weight:bold">))</span>
            <span style="color:#000">image</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">save</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">save_path</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#204a87;font-weight:bold">else</span><span style="color:#000;font-weight:bold">:</span>
        <span style="color:#000">form</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">UploadForm</span><span style="color:#000;font-weight:bold">()</span>

    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">render</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;media-example.html&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;form&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">form</span><span style="color:#000;font-weight:bold">})</span>
</code></pre></div><h2 id="uso-de-modelos">Uso de Modelos</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.db</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">models</span>

<span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">ExampleModel</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">models</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">Model</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#000">image_field</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">models</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">ImageField</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">upload_to</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;images/&#34;</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000">file_field</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">models</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FileField</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">upload_to</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;files/&#34;</span><span style="color:#000;font-weight:bold">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.shortcuts</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">render</span>

<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">.forms</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">UploadForm</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">.models</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">ExampleModel</span>

<span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">media_example</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#000">instance</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87;font-weight:bold">None</span>

    <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">method</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#4e9a06">&#39;POST&#39;</span><span style="color:#000;font-weight:bold">:</span>
        <span style="color:#000">form</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">UploadForm</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">POST</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">request</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">FILES</span><span style="color:#000;font-weight:bold">)</span>

        <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">form</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">is_valid</span><span style="color:#000;font-weight:bold">():</span>
            <span style="color:#000">instance</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">ExampleModel</span><span style="color:#000;font-weight:bold">()</span>
            <span style="color:#000">instance</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">image_field</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">form</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">cleaned_data</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#34;image_upload&#34;</span><span style="color:#000;font-weight:bold">]</span>
            <span style="color:#000">instance</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">file_field</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">form</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">cleaned_data</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#34;file_upload&#34;</span><span style="color:#000;font-weight:bold">]</span>
            <span style="color:#000">instance</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">save</span><span style="color:#000;font-weight:bold">()</span>
    <span style="color:#204a87;font-weight:bold">else</span><span style="color:#000;font-weight:bold">:</span>
        <span style="color:#000">form</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">UploadForm</span><span style="color:#000;font-weight:bold">()</span>

    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">render</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;media-example.html&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#34;form&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">form</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;instance&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">instance</span><span style="color:#000;font-weight:bold">})</span>
</code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">    <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">form</span> <span style="color:#c4a000">method</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;post&#34;</span> <span style="color:#c4a000">enctype</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;multipart/form-data&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
        {% csrf_token %}
        {{ form.as_p }}
        <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">button</span> <span style="color:#c4a000">type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;submit&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>Submit<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">button</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">form</span><span style="color:#000;font-weight:bold">&gt;</span>
    {% if instance %}
        <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">img</span> <span style="color:#c4a000">src</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;{{ instance.image_field.url }}&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
    {% endif %}
</code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-11c7d65af1cf9722ba5d6add2a60854e">4.14 - Archivos estáticos</h1>
    <div class="lead">Subida de archivos</div>
	

<div class="pageinfo pageinfo-primary">
<p>Documentación:</p>
<ul>
<li><a href="https://docs.djangoproject.com/en/3.2/howto/static-files/">https://docs.djangoproject.com/en/3.2/howto/static-files/</a></li>
</ul>

</div>

<h2 id="configurar">Configurar</h2>
<p>Incluir <strong>django.contrib.staticfiles</strong> en  <strong>INSTALLED_APPS</strong>.</p>
<p>En el archivo <strong>settings.py</strong>, incluir la siguiente línea:</p>
<p><code>STATIC_URL = '/static/'</code></p>
<p>En las plantillas:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">{% load static %}
<span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">img</span> <span style="color:#c4a000">src</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;{% static &#39;my_app/example.jpg&#39; %}&#34;</span> <span style="color:#c4a000">alt</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;My image&#34;</span><span style="color:#000;font-weight:bold">&gt;</span>
</code></pre></div><p>Los archivos van en una carptea <strong>static</strong> en las apps</p>
<h2 id="servir-los-archivos-estáticos">Servir los archivos estáticos</h2>
<h3 id="desarrollo">Desarrollo</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.conf</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">settings</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.contrib.staticfiles.urls</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">staticfiles_urlpatterns</span>

<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#000">settings</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">DEBUG</span><span style="color:#000;font-weight:bold">:</span>
    <span style="color:#8f5902;font-style:italic"># Serve static and media files from development server</span>
    <span style="color:#000">urlpatterns</span> <span style="color:#ce5c00;font-weight:bold">+=</span> <span style="color:#000">staticfiles_urlpatterns</span><span style="color:#000;font-weight:bold">()</span>

</code></pre></div><h3 id="despliegue">Despliegue</h3>
<ul>
<li><a href="https://docs.djangoproject.com/en/3.2/howto/static-files/deployment/">https://docs.djangoproject.com/en/3.2/howto/static-files/deployment/</a></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-ddcdd7458633b63ecc0739d89af5e8a9">4.15 - Uso de mapas</h1>
    <div class="lead">Ejemplo uso de mapas con leaflet</div>
	

<div class="pageinfo pageinfo-primary">
<p>Documentación:</p>
<ul>
<li><a href="https://leafletjs.com/examples/quick-start/">https://leafletjs.com/examples/quick-start/</a></li>
<li>Apps específicas: <a href="https://django-leaflet.readthedocs.io/en/latest/">https://django-leaflet.readthedocs.io/en/latest/</a></li>
<li>Tutoriales: <a href="https://mappinggis.com/?s=leaflet">https://mappinggis.com/?s=leaflet</a></li>
<li>Ejemplos: <a href="https://github.com/tomik23/leaflet-examples">https://github.com/tomik23/leaflet-examples</a></li>
</ul>

</div>

<h2 id="configurar">Configurar</h2>
<ol>
<li>Css de leaflet</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"> <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">link</span> <span style="color:#c4a000">rel</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;stylesheet&#34;</span> <span style="color:#c4a000">href</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;https://unpkg.com/leaflet@1.7.1/dist/leaflet.css&#34;</span>
   <span style="color:#c4a000">integrity</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==&#34;</span>
   <span style="color:#c4a000">crossorigin</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;&#34;</span><span style="color:#000;font-weight:bold">/&gt;</span>
</code></pre></div><ol start="2">
<li>JS de Leaflet</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"> <span style="color:#8f5902;font-style:italic">&lt;!-- Make sure you put this AFTER Leaflet&#39;s CSS --&gt;</span>
 <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">script</span> <span style="color:#c4a000">src</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;https://unpkg.com/leaflet@1.7.1/dist/leaflet.js&#34;</span>
   <span style="color:#c4a000">integrity</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==&#34;</span>
   <span style="color:#c4a000">crossorigin</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;&#34;</span><span style="color:#000;font-weight:bold">&gt;&lt;/</span><span style="color:#204a87;font-weight:bold">script</span><span style="color:#000;font-weight:bold">&gt;</span>
</code></pre></div><ol start="3">
<li>En plantilla:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"> <span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">div</span> <span style="color:#c4a000">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;map&#34;</span><span style="color:#000;font-weight:bold">&gt;&lt;/</span><span style="color:#204a87;font-weight:bold">div</span><span style="color:#000;font-weight:bold">&gt;</span>
</code></pre></div><ol start="4">
<li>Configurar mapa desde js
Ejemplo en plantilla de django con coordenadas en variable <strong>coords</strong></li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">script</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#204a87;font-weight:bold">var</span> <span style="color:#000">mimapa</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">L</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">map</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;map&#39;</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">setView</span><span style="color:#000;font-weight:bold">([{{</span><span style="color:#000">coords</span><span style="color:#000;font-weight:bold">}}],</span> <span style="color:#0000cf;font-weight:bold">13</span><span style="color:#000;font-weight:bold">);</span>

    <span style="color:#000">L</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">tileLayer</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#000">attribution</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;Map data &amp;copy; &lt;a href=&#34;http://openstreetmap.org&#34;&gt;OpenStreetMap&lt;/a&gt; contributors, &lt;a href=&#34;http://creativecommons.org/licenses/by-sa/2.0/&#34;&gt;CC-BY-SA&lt;/a&gt;, Imagery © &lt;a href=&#34;http://cloudmade.com&#34;&gt;CloudMade&lt;/a&gt;&#39;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000">maxZoom</span><span style="color:#ce5c00;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">18</span>
    <span style="color:#000;font-weight:bold">}).</span><span style="color:#000">addTo</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">mimapa</span><span style="color:#000;font-weight:bold">);</span>

    <span style="color:#000">L</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">marker</span><span style="color:#000;font-weight:bold">([{{</span><span style="color:#000">coords</span><span style="color:#000;font-weight:bold">}}]).</span><span style="color:#000">addTo</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">mimapa</span><span style="color:#000;font-weight:bold">).</span><span style="color:#000">bindPopup</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;CPI Los Enlaces&#34;</span><span style="color:#000;font-weight:bold">);</span>
<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">script</span><span style="color:#000;font-weight:bold">&gt;</span>
</code></pre></div><ol start="5">
<li>Configurar el mapa en css</li>
</ol>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#204a87;font-weight:bold">style</span><span style="color:#000;font-weight:bold">&gt;</span>
    <span style="color:#000;font-weight:bold">#</span><span style="color:#000">map</span> <span style="color:#000;font-weight:bold">{</span> <span style="color:#204a87;font-weight:bold">height</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#0000cf;font-weight:bold">400</span><span style="color:#204a87;font-weight:bold">px</span> <span style="color:#000;font-weight:bold">;}</span>
<span style="color:#000;font-weight:bold">&lt;/</span><span style="color:#204a87;font-weight:bold">style</span><span style="color:#000;font-weight:bold">&gt;</span>
</code></pre></div>
</div>



    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-6a416270f7839d15dc8483f60543b361">5 - Django2</h1>
    <div class="lead">Desarrollo web con Django: &ldquo;The web framework for perfectionists with deadlines&rdquo;</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-ecfa9bd0a552fd87dacbb41e693471e4">5.1 - Generación de archivos CSV</h1>
    <div class="lead">Generación de salida csv</div>
	

<div class="pageinfo pageinfo-primary">
<ul>
<li><a href="https://docs.djangoproject.com/en/4.0/howto/outputting-csv/">https://docs.djangoproject.com/en/4.0/howto/outputting-csv/</a></li>
</ul>

</div>

<h2 id="generación-de-un-csv-dinámico">Generación de un CSV dinámico</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">csv</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.http</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">HttpResponse</span>

<span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">some_view</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#8f5902;font-style:italic"># Create the HttpResponse object with the appropriate CSV header.</span>
    <span style="color:#000">response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">HttpResponse</span><span style="color:#000;font-weight:bold">(</span>
        <span style="color:#000">content_type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;text/csv&#39;</span><span style="color:#000;font-weight:bold">,</span>
        <span style="color:#000">headers</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#39;Content-Disposition&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;attachment; filename=&#34;somefilename.csv&#34;&#39;</span><span style="color:#000;font-weight:bold">},</span>
    <span style="color:#000;font-weight:bold">)</span>

    <span style="color:#000">writer</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">csv</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">writer</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#000;font-weight:bold">)</span>
    <span style="color:#000">writer</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">writerow</span><span style="color:#000;font-weight:bold">([</span><span style="color:#4e9a06">&#39;First row&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;Foo&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;Bar&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;Baz&#39;</span><span style="color:#000;font-weight:bold">])</span>
    <span style="color:#000">writer</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">writerow</span><span style="color:#000;font-weight:bold">([</span><span style="color:#4e9a06">&#39;Second row&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;A&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;B&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;C&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;&#34;Testing&#34;&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#34;Here&#39;s a quote&#34;</span><span style="color:#000;font-weight:bold">])</span>

    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">response</span>
</code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-50f59551a2b6a256d2f76ab89658f0cc">5.2 - Salida JSON</h1>
    <div class="lead">Generación de salida json</div>
	

<div class="pageinfo pageinfo-primary">
<ul>
<li><a href="https://docs.djangoproject.com/en/4.0/ref/request-response/#django.http.JsonResponse">https://docs.djangoproject.com/en/4.0/ref/request-response/#django.http.JsonResponse</a></li>
<li><a href="https://dev.to/brian101co/how-to-return-a-json-response-in-django-gen">https://dev.to/brian101co/how-to-return-a-json-response-in-django-gen</a></li>
</ul>

</div>

<h2 id="generación-salida-json">Generación salida JSON</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.http</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">JsonResponse</span>

<span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">view_list_json</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#ce5c00;font-weight:bold">...</span>
    <span style="color:#000">data</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">{}</span> <span style="color:#8f5902;font-style:italic"># diccionario</span>
    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">JsonResponse</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">data</span><span style="color:#000;font-weight:bold">)</span>


<span style="color:#8f5902;font-style:italic"># views.py</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.core.serializers</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">serialize</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.http</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">HttpResponse</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">.models</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">Post</span>

<span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">django_models_json</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">request</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#000">qs</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Post</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">objects</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">all</span><span style="color:#000;font-weight:bold">()</span>
    <span style="color:#000">data</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">serialize</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#34;json&#34;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">qs</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">fields</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;title&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;content&#39;</span><span style="color:#000;font-weight:bold">))</span>
    <span style="color:#204a87;font-weight:bold">return</span> <span style="color:#000">HttpResponse</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">data</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">content_type</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;application/json&#34;</span><span style="color:#000;font-weight:bold">)</span>
</code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-6c455beabe79b76ddb0f7bf19ee1ed69">5.3 - Tests</h1>
    <div class="lead">Tests</div>
	

<div class="pageinfo pageinfo-primary">
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/">https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/</a></li>
<li><a href="https://docs.djangoproject.com/en/4.0/topics/testing/">https://docs.djangoproject.com/en/4.0/topics/testing/</a></li>
</ul>

</div>

<h2 id="por-qué">¿Por qué?</h2>
<ul>
<li>Nos ahorran tiempo</li>
<li>Previenen problemas, no sólo los identifican</li>
<li>Hacen el código más legible</li>
<li>Ayudan al trabajo en equipo</li>
</ul>
<h2 id="tipos-de-tests">Tipos de tests</h2>
<p>Hay varias clasificaciones de tests automáticos:</p>
<ul>
<li>
<p>Tests unitarios</p>
</li>
<li>
<p>Tests de integración</p>
</li>
<li>
<p>Tests de regresión</p>
</li>
<li>
<p>Tests de usabilidad</p>
</li>
<li>
<p>Tests de rendimiento</p>
</li>
<li>
<p>Tests de calidad</p>
</li>
<li>
<p>Tests de seguridad</p>
</li>
<li>
<p>Tests de calidad de código</p>
</li>
<li>
<p>Tests de calidad de interfaz</p>
</li>
<li>
<p>Tests de calidad de documentación</p>
</li>
</ul>
<h2 id="estrategias">Estrategias</h2>
<ul>
<li>TDD</li>
<li>Después del código</li>
</ul>
<h2 id="herramientas">Herramientas</h2>
<p>SimpleTestCase, TransactionTestCase, TestCase, LiveServerTestCase</p>
<h2 id="cómo">¿Cómo?</h2>
<ul>
<li>Escribir los tests en la carpeta tests</li>
<li><code>python manage.py test </code></li>
</ul>
<h2 id="tests-de-modelos">Tests de modelos</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.test</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">TestCase</span>

<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">catalog.models</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">Author</span>

<span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">AuthorModelTest</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">TestCase</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#5c35cc;font-weight:bold">@classmethod</span>
    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">setUpTestData</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">cls</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#8f5902;font-style:italic"># Set up non-modified objects used by all test methods</span>
        <span style="color:#000">Author</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">objects</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">create</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">first_name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;Big&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">last_name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;Bob&#39;</span><span style="color:#000;font-weight:bold">)</span>

    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">test_object_name_is_last_name_comma_first_name</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#000">author</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Author</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">objects</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#000">expected_object_name</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">f</span><span style="color:#4e9a06">&#39;</span><span style="color:#4e9a06">{</span><span style="color:#000">author</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">last_name</span><span style="color:#4e9a06">}</span><span style="color:#4e9a06">, </span><span style="color:#4e9a06">{</span><span style="color:#000">author</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">first_name</span><span style="color:#4e9a06">}</span><span style="color:#4e9a06">&#39;</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">assertEqual</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87">str</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">author</span><span style="color:#000;font-weight:bold">),</span> <span style="color:#000">expected_object_name</span><span style="color:#000;font-weight:bold">)</span>

    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">test_get_absolute_url</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#000">author</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Author</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">objects</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87">id</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">1</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#8f5902;font-style:italic"># This will also fail if the urlconf is not defined.</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">assertEqual</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">author</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get_absolute_url</span><span style="color:#000;font-weight:bold">(),</span> <span style="color:#4e9a06">&#39;/catalog/author/1&#39;</span><span style="color:#000;font-weight:bold">)</span>

</code></pre></div><h2 id="tests-de-vistas">Tests de vistas</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.test</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">TestCase</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">django.urls</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">reverse</span>

<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">catalog.models</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">Author</span>

<span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">AuthorListViewTest</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">TestCase</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#5c35cc;font-weight:bold">@classmethod</span>
    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">setUpTestData</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">cls</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#8f5902;font-style:italic"># Create 13 authors for pagination tests</span>
        <span style="color:#000">number_of_authors</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">13</span>

        <span style="color:#204a87;font-weight:bold">for</span> <span style="color:#000">author_id</span> <span style="color:#204a87;font-weight:bold">in</span> <span style="color:#204a87">range</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">number_of_authors</span><span style="color:#000;font-weight:bold">):</span>
            <span style="color:#000">Author</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">objects</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">create</span><span style="color:#000;font-weight:bold">(</span>
                <span style="color:#000">first_name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">f</span><span style="color:#4e9a06">&#39;Christian </span><span style="color:#4e9a06">{</span><span style="color:#000">author_id</span><span style="color:#4e9a06">}</span><span style="color:#4e9a06">&#39;</span><span style="color:#000;font-weight:bold">,</span>
                <span style="color:#000">last_name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">f</span><span style="color:#4e9a06">&#39;Surname </span><span style="color:#4e9a06">{</span><span style="color:#000">author_id</span><span style="color:#4e9a06">}</span><span style="color:#4e9a06">&#39;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#000;font-weight:bold">)</span>

    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">test_view_url_exists_at_desired_location</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#000">response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;/catalog/authors/&#39;</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">assertEqual</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">status_code</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">)</span>

    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">test_view_url_accessible_by_name</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#000">response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">reverse</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;authors&#39;</span><span style="color:#000;font-weight:bold">))</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">assertEqual</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">status_code</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">)</span>

    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">test_view_uses_correct_template</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#000">response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">reverse</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;authors&#39;</span><span style="color:#000;font-weight:bold">))</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">assertEqual</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">status_code</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">assertTemplateUsed</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;catalog/author_list.html&#39;</span><span style="color:#000;font-weight:bold">)</span>

    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">test_pagination_is_ten</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#000">response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">reverse</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;authors&#39;</span><span style="color:#000;font-weight:bold">))</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">assertEqual</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">status_code</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">assertTrue</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;is_paginated&#39;</span> <span style="color:#204a87;font-weight:bold">in</span> <span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">context</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">assertTrue</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">context</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;is_paginated&#39;</span><span style="color:#000;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#204a87;font-weight:bold">True</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">assertEqual</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87">len</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">context</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;author_list&#39;</span><span style="color:#000;font-weight:bold">]),</span> <span style="color:#0000cf;font-weight:bold">10</span><span style="color:#000;font-weight:bold">)</span>

    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">test_lists_all_authors</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#8f5902;font-style:italic"># Get second page and confirm it has (exactly) remaining 3 items</span>
        <span style="color:#000">response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">reverse</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;authors&#39;</span><span style="color:#000;font-weight:bold">)</span><span style="color:#ce5c00;font-weight:bold">+</span><span style="color:#4e9a06">&#39;?page=2&#39;</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">assertEqual</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">status_code</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">assertTrue</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;is_paginated&#39;</span> <span style="color:#204a87;font-weight:bold">in</span> <span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">context</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">assertTrue</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">context</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;is_paginated&#39;</span><span style="color:#000;font-weight:bold">]</span> <span style="color:#ce5c00;font-weight:bold">==</span> <span style="color:#204a87;font-weight:bold">True</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">assertEqual</span><span style="color:#000;font-weight:bold">(</span><span style="color:#204a87">len</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">context</span><span style="color:#000;font-weight:bold">[</span><span style="color:#4e9a06">&#39;author_list&#39;</span><span style="color:#000;font-weight:bold">]),</span> <span style="color:#0000cf;font-weight:bold">3</span><span style="color:#000;font-weight:bold">)</span>
</code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
<span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">AccesoUsuariosTest</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">TestCase</span><span style="color:#000;font-weight:bold">):</span>
    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">setUp</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#8f5902;font-style:italic"># Create a user</span>
        <span style="color:#000">test_user1</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">User</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">objects</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">create_user</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">username</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;testuser1&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">password</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;1X&lt;ISRUkw+tuK&#39;</span><span style="color:#000;font-weight:bold">)</span>

        <span style="color:#000">test_user1</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">save</span><span style="color:#000;font-weight:bold">()</span>

        <span style="color:#8f5902;font-style:italic"># Create a book</span>
        <span style="color:#000">test_author</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Author</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">objects</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">create</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">first_name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;John&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">last_name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;Smith&#39;</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#000">test_genre</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Genre</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">objects</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">create</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;Fantasy&#39;</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#000">test_language</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Language</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">objects</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">create</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;English&#39;</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#000">test_book</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">Book</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">objects</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">create</span><span style="color:#000;font-weight:bold">(</span>
            <span style="color:#000">title</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;Book Title&#39;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#000">summary</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;My book summary&#39;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#000">isbn</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;ABCDEFG&#39;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#000">author</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">test_author</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#000">language</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000">test_language</span><span style="color:#000;font-weight:bold">,</span>
        <span style="color:#000;font-weight:bold">)</span>
    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">test_redirect_if_not_logged_in</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#000">response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">reverse</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;renew-book-librarian&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">kwargs</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#39;pk&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">test_bookinstance1</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">pk</span><span style="color:#000;font-weight:bold">}))</span>
        <span style="color:#8f5902;font-style:italic"># Manually check redirect (Can&#39;t use assertRedirect, because the redirect URL is unpredictable)</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">assertEqual</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">status_code</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">302</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">assertTrue</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">url</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">startswith</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;/accounts/login/&#39;</span><span style="color:#000;font-weight:bold">))</span>

    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">test_forbidden_if_logged_in_but_not_correct_permission</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#000">login</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">login</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">username</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;testuser1&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">password</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;1X&lt;ISRUkw+tuK&#39;</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#000">response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">reverse</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;renew-book-librarian&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">kwargs</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#39;pk&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">test_bookinstance1</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">pk</span><span style="color:#000;font-weight:bold">}))</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">assertEqual</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">status_code</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">403</span><span style="color:#000;font-weight:bold">)</span>

    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">test_logged_in_with_permission_borrowed_book</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#000">login</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">login</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">username</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;testuser2&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">password</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;2HJ1vRV0Z&amp;3iD&#39;</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#000">response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">reverse</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;renew-book-librarian&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">kwargs</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#39;pk&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">test_bookinstance2</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">pk</span><span style="color:#000;font-weight:bold">}))</span>

        <span style="color:#8f5902;font-style:italic"># Check that it lets us login - this is our book and we have the right permissions.</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">assertEqual</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">status_code</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">)</span>

    <span style="color:#204a87;font-weight:bold">def</span> <span style="color:#000">test_logged_in_with_permission_another_users_borrowed_book</span><span style="color:#000;font-weight:bold">(</span><span style="color:#3465a4">self</span><span style="color:#000;font-weight:bold">):</span>
        <span style="color:#000">login</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">login</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">username</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;testuser2&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">password</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;2HJ1vRV0Z&amp;3iD&#39;</span><span style="color:#000;font-weight:bold">)</span>
        <span style="color:#000">response</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">client</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">reverse</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;renew-book-librarian&#39;</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#000">kwargs</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#39;pk&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">test_bookinstance1</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">pk</span><span style="color:#000;font-weight:bold">}))</span>

        <span style="color:#8f5902;font-style:italic"># Check that it lets us login. We&#39;re a librarian, so we can view any users book</span>
        <span style="color:#3465a4">self</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">assertEqual</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">response</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">status_code</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#0000cf;font-weight:bold">200</span><span style="color:#000;font-weight:bold">)</span>

</code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-57a32f787f80d6d30f7e8555fbdf302c">5.4 - Copias de seguridad</h1>
    <div class="lead">Copias de segurdad. Backup y restore</div>
	

<div class="pageinfo pageinfo-primary">
<ul>
<li><a href="https://django-dbbackup.readthedocs.io/">https://django-dbbackup.readthedocs.io/</a></li>
<li><a href="https://docs.djangoproject.com/en/4.0/ref/django-admin/#dumpdata">https://docs.djangoproject.com/en/4.0/ref/django-admin/#dumpdata</a></li>
<li><a href="https://docs.djangoproject.com/en/4.0/ref/django-admin/#loaddata">https://docs.djangoproject.com/en/4.0/ref/django-admin/#loaddata</a></li>
</ul>

</div>

<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#000">pip</span> <span style="color:#000">install</span> <span style="color:#000">django</span><span style="color:#ce5c00;font-weight:bold">-</span><span style="color:#000">dbbackup</span>


<span style="color:#8f5902;font-style:italic"># settings.py</span>
<span style="color:#000">INSTALLED_APPS</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">(</span>
    <span style="color:#ce5c00;font-weight:bold">...</span>
    <span style="color:#4e9a06">&#39;dbbackup&#39;</span><span style="color:#000;font-weight:bold">,</span>  <span style="color:#8f5902;font-style:italic"># django-dbbackup</span>
<span style="color:#000;font-weight:bold">)</span>

<span style="color:#000">DBBACKUP_STORAGE</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#4e9a06">&#39;django.core.files.storage.FileSystemStorage&#39;</span>
<span style="color:#000">DBBACKUP_STORAGE_OPTIONS</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">{</span><span style="color:#4e9a06">&#39;location&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;/my/backup/dir/&#39;</span><span style="color:#000;font-weight:bold">}</span>


<span style="color:#a40000">$</span> <span style="color:#000">python</span> <span style="color:#000">manage</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">py</span> <span style="color:#000">dbbackup</span>
<span style="color:#a40000">$</span> <span style="color:#000">python</span> <span style="color:#000">manage</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">py</span> <span style="color:#000">dbrestore</span>
<span style="color:#a40000">$</span> <span style="color:#000">python</span> <span style="color:#000">manage</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">py</span> <span style="color:#000">mediabackup</span>
</code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#a40000">$</span> <span style="color:#000">python</span> <span style="color:#000">manage</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">py</span> <span style="color:#000">dumpdata</span>
<span style="color:#a40000">$</span> <span style="color:#000">python</span> <span style="color:#000">manage</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">py</span> <span style="color:#000">loaddata</span>
</code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-e90d515c257a37967f1f0bd062aaf89e">5.5 - Postgresql</h1>
    
	

<div class="pageinfo pageinfo-primary">
<ul>
<li><a href="https://docs.djangoproject.com/en/4.0/ref/databases/">https://docs.djangoproject.com/en/4.0/ref/databases/</a></li>
<li><a href="https://docs.djangoproject.com/en/4.0/ref/settings/#std:setting-DATABASES">https://docs.djangoproject.com/en/4.0/ref/settings/#std:setting-DATABASES</a></li>
<li><a href="https://tutorial-extensions.djangogirls.org/es/optional_postgresql_installation">https://tutorial-extensions.djangogirls.org/es/optional_postgresql_installation</a></li>
<li><a href="https://www.section.io/engineering-education/django-app-using-postgresql-database/">https://www.section.io/engineering-education/django-app-using-postgresql-database/</a></li>
<li><a href="https://djangocentral.com/using-postgresql-with-django/">https://djangocentral.com/using-postgresql-with-django/</a></li>
</ul>

</div>

<h2 id="instalación-de-postgresql-en-linux">Instalación de postgresql en linux</h2>
<p>Buscar en la información</p>
<h2 id="instalación-con-docker">Instalación con docker</h2>
<ul>
<li><a href="https://docs.docker.com/engine/install/ubuntu/">https://docs.docker.com/engine/install/ubuntu/</a></li>
<li><a href="https://docs.docker.com/engine/install/linux-postinstall/">https://docs.docker.com/engine/install/linux-postinstall/</a></li>
<li><a href="https://docs.docker.com/samples/django/">https://docs.docker.com/samples/django/</a></li>
</ul>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -fsSL https://get.docker.com -o get-docker.sh
$ sudo sh get-docker.sh

$ sudo groupadd docker
$ sudo usermod -aG docker <span style="color:#000">$USER</span>
$ newgrp docker
</code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#8f5902;font-style:italic"># Use postgres/example user/password credentials</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">version</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;3.1&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">services</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">db</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">image</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">postgres:13.0-alpine</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">restart</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">never</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">environment</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">POSTGRES_USER=hello_django</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">POSTGRES_PASSWORD=hello_django</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">POSTGRES_DB=hello_django_dev</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">volumes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">./postgres_data:/var/lib/postgresql/data/</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">ports</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#0000cf;font-weight:bold">5432</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">5432</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">adminer</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">image</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">adminer</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">restart</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">never</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">ports</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#0000cf;font-weight:bold">8080</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">8080</span><span style="color:#f8f8f8;text-decoration:underline">
</span></code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ docker-compose up -d --build
</code></pre></div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-6e3579981685f703c3ce642bc7464faa">5.6 - Utilidades</h1>
    
	<h2 id="dotenv---uso-de-variables-de-entorno-en-desarrollodespliegue">dotenv - uso de variables de entorno en desarrollo/despliegue</h2>


<div class="pageinfo pageinfo-primary">
<ul>
<li><a href="https://pypi.org/project/python-dotenv/">https://pypi.org/project/python-dotenv/</a></li>
</ul>

</div>

<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pip install python-dotenv
</code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># .env</span>

<span style="color:#8f5902;font-style:italic"># DB</span>
<span style="color:#000">POSTGRES_USER</span><span style="color:#ce5c00;font-weight:bold">=</span>postgres
<span style="color:#000">POSTGRES_PASSWORD</span><span style="color:#ce5c00;font-weight:bold">=</span>postgres
<span style="color:#000">POSTGRES_DB</span><span style="color:#ce5c00;font-weight:bold">=</span>postgres

<span style="color:#8f5902;font-style:italic"># app</span>
<span style="color:#000">SECRET_KEY</span><span style="color:#ce5c00;font-weight:bold">=</span>y6xg%o<span style="color:#000;font-weight:bold">&amp;</span>^m4ggo5s!%mcdnu@v#neu#1v#2s9d<span style="color:#000;font-weight:bold">&amp;</span>_q2<span style="color:#ce5c00;font-weight:bold">(</span>wixlxd<span style="color:#ce5c00;font-weight:bold">((</span><span style="color:#8f5902;font-style:italic">#</span>
<span style="color:#000">DATABASE_HOST</span><span style="color:#ce5c00;font-weight:bold">=</span>db
<span style="color:#000">DATABASE_NAME</span><span style="color:#ce5c00;font-weight:bold">=</span>postgres
<span style="color:#000">DATABASE_USER</span><span style="color:#ce5c00;font-weight:bold">=</span>postgres
<span style="color:#000">DATABASE_PASSWORD</span><span style="color:#ce5c00;font-weight:bold">=</span>postgres

<span style="color:#8f5902;font-style:italic"># for debugging and error reporting.</span>
<span style="color:#000">DEBUG</span><span style="color:#ce5c00;font-weight:bold">=</span>True
</code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#8f5902;font-style:italic"># settings.py</span>
<span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">os</span>
<span style="color:#204a87;font-weight:bold">from</span> <span style="color:#000">dotenv</span> <span style="color:#204a87;font-weight:bold">import</span> <span style="color:#000">load_dotenv</span>

<span style="color:#000">load_dotenv</span><span style="color:#000;font-weight:bold">([</span><span style="color:#ce5c00;font-weight:bold">&lt;</span><span style="color:#000">path</span><span style="color:#ce5c00;font-weight:bold">&gt;</span><span style="color:#000;font-weight:bold">])</span>  <span style="color:#8f5902;font-style:italic"># take environment variables from .env.</span>

<span style="color:#8f5902;font-style:italic"># SECURITY WARNING: keep the secret key used in production secret!</span>
<span style="color:#000">SECRET_KEY</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87">str</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">os</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">getenv</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;SECRET_KEY&#39;</span><span style="color:#000;font-weight:bold">))</span>

<span style="color:#8f5902;font-style:italic"># Database </span>
<span style="color:#204a87;font-weight:bold">if</span> <span style="color:#4e9a06">&#39;DATABASE_HOST&#39;</span> <span style="color:#204a87;font-weight:bold">in</span> <span style="color:#000">os</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">environ</span><span style="color:#000;font-weight:bold">:</span>
    <span style="color:#000">DATABASES</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#4e9a06">&#39;default&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
            <span style="color:#4e9a06">&#39;HOST&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">os</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">environ</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;DATABASE_HOST&#39;</span><span style="color:#000;font-weight:bold">)</span>
            <span style="color:#8f5902;font-style:italic"># ENGINE read notes below</span>
            <span style="color:#4e9a06">&#39;ENGINE&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;django.db.backends.postgresql_psycopg2&#39;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#4e9a06">&#39;NAME&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">os</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">environ</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;DATABASE_NAME&#39;</span><span style="color:#000;font-weight:bold">),</span>
            <span style="color:#4e9a06">&#39;USER&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">os</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">environ</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;DATABASE_USER&#39;</span><span style="color:#000;font-weight:bold">),</span>
            <span style="color:#4e9a06">&#39;PASSWORD&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">os</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">environ</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">get</span><span style="color:#000;font-weight:bold">(</span><span style="color:#4e9a06">&#39;DATABASE_PASSWORD&#39;</span><span style="color:#000;font-weight:bold">),</span>
        <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">}</span>
<span style="color:#204a87;font-weight:bold">else</span> <span style="color:#000;font-weight:bold">:</span>
    <span style="color:#000">DATABASES</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#4e9a06">&#39;default&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
            <span style="color:#4e9a06">&#39;ENGINE&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;django.db.backends.sqlite3&#39;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#4e9a06">&#39;NAME&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000">os</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">path</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#000">join</span><span style="color:#000;font-weight:bold">(</span><span style="color:#000">BASE_DIR</span><span style="color:#000;font-weight:bold">,</span> <span style="color:#4e9a06">&#39;db.sqlite3&#39;</span><span style="color:#000;font-weight:bold">),</span>
        <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">}</span>

</code></pre></div><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#8f5902;font-style:italic"># docker-compose.yml</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">version</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;3.1&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">services</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">db</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">image</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">postgres:13.0-alpine</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">env_file</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">.env</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">volumes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">./postgres_data:/var/lib/postgresql/data/</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">ports</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#0000cf;font-weight:bold">5432</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">5432</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">adminer</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">image</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">adminer</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">ports</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#0000cf;font-weight:bold">8080</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">8080</span><span style="color:#f8f8f8;text-decoration:underline">
</span></code></pre></div>
</div>



    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-e65c771e2f8bbed1c3203d175a349f92">6 - Proyectos</h1>
    <div class="lead">Proyectos módulo Desarrollo Web Entorno Servidor</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-805220f211a9bbec693b373a3e7b3e5b">6.1 - Proyecto Django - Primer trimestre</h1>
    <div class="lead">Proyecto de Django primera evaluación</div>
	

<div class="pageinfo pageinfo-primary">
<p><strong>Descripción</strong>: proyecto de una web personal con altas, bajas, modificaciones y listados de datos.</p>

</div>

<h2 id="requisitos">REQUISITOS</h2>
<ol>
<li>
<p>El proyecto estará gestionado en un repositorio de código git con un remoto en github. Accesible por el profesor (1 punto)</p>
<ul>
<li>Habrá una gestión correcta de cambios con comentarios claros</li>
<li>Contendrá un <strong>README.md</strong> con la descripción del proyecto y un método de instalación</li>
<li>Un <strong>.gitignore</strong> con las extensiones que no queremos que se suban al repositorio</li>
</ul>
</li>
<li>
<p>Gestión del proyecto (1 punto)</p>
<ul>
<li>Creación de un entorno virtual con <strong>requirements.txt</strong> para indicar las dependencias</li>
<li>El directorio <strong>env</strong> no se incluirá en el repositorio.</li>
<li>Todas las funciones y clases estarán documentadas.</li>
</ul>
</li>
<li>
<p><strong>Models</strong> (2 puntos)</p>
<ul>
<li>Gestión correcta de datos (tipos de datos y relaciones)</li>
<li>Al menos 3 modelos con relaciones entre ellos</li>
<li>Todos tendrán método <strong><strong>str</strong></strong></li>
</ul>
</li>
<li>
<p><strong>urls</strong> (1 punto)</p>
<ul>
<li>Urls generales y la aplicación para listados, altas, bajas y modificaciones</li>
</ul>
</li>
<li>
<p>Hará uso del <strong>Admin</strong> al menos para listados con filtros y búsquedas. (1 punto)</p>
</li>
<li>
<p><strong>views</strong> (2 punto)</p>
<ul>
<li>Uso de vistas tipo función y de tipo clase</li>
<li>Gestión correcta y segura de formularios</li>
<li>Las funcionalidades que modifican los datos tienen que estar limitadas a usuarios autenticados</li>
</ul>
</li>
<li>
<p><strong>templates</strong> (2 punto)</p>
<ul>
<li>Habrá herencia de una plantilla base</li>
<li>Habrá una barra de menús o sidebar en una plantilla aparte</li>
<li>bloques de contenido, extracss y extrajs</li>
<li>Gestión correcta de formularios</li>
<li>Bloques <strong>if</strong> y <strong>for</strong> para mostrar correctamente los datoss</li>
</ul>
</li>
<li>
<p>Hará una presentación de la aplicación ante los compañeros el día del examen del módulo. (1 punto)</p>
</li>
</ol>
<h2 id="fecha-limiete-de-entrega">FECHA LIMIETE DE ENTREGA</h2>
<p>8 de diciembre a las 20 horas.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-d9e5431301d222bf85258c44b7066df4">6.2 - Centros Educativos de Aragón</h1>
    <div class="lead">Ejercicios con datos y tablas</div>
	

<div class="pageinfo pageinfo-primary">
<p><strong>Descripción</strong>: proyectos para visualizar centros educativos.</p>

</div>

<h2 id="fuentes-de-datos">Fuentes de datos</h2>
<ul>
<li><a href="https://educa.aragon.es/buscador-de-centros#/map">Buscador de centros</a></li>
<li><a href="https://opendata.aragon.es/datos/catalogo/dataset/directorio-de-centros-educativos-de-aragon">Directorio oficial de centros</a></li>
<li><a href="datos_centros.json">Datos de centros</a></li>
</ul>
<h2 id="pasos">Pasos:</h2>
<ol>
<li>Creación de estructura (entorno, proyecto, app)</li>
<li>Estructura de datos (modelo)</li>
<li>Carga de datos (proceso de csv o json)</li>
<li>Visualización de datos:
<ul>
<li>Tablas. Explorar <a href="https://django-tables2.readthedocs.io/">https://django-tables2.readthedocs.io/</a></li>
<li>Mapa. Explorar <a href="https://leafletjs.com/examples/quick-start/">https://leafletjs.com/examples/quick-start/</a> <a href="https://django-leaflet.readthedocs.io/">https://django-leaflet.readthedocs.io/</a> <a href="http://python-visualization.github.io/folium/quickstart.html">http://python-visualization.github.io/folium/quickstart.html</a></li>
</ul>
</li>
</ol>

</div>



    
	
  

    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-62136566f85dfce3c1ff04c7bfce8269">7 - Prácticas</h1>
    <div class="lead">Prácticas específicas de clase</div>
	
</div>



    
      
  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-945d7fcaf73612753824763620a862f3">7.1 - Migración del proyecto de Django de sqlite a Postgresql</h1>
    <div class="lead">Migración de Sqlite a Postgresql</div>
	

<div class="pageinfo pageinfo-primary">
<p><strong>Descripción</strong>: Migración a Postgresql</p>

</div>

<h2 id="copia-de-datos-de-sqlite">Copia de datos de sqlite</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># hacemos una copia de los datos de sqlite</span>
<span style="color:#8f5902;font-style:italic"># creamos antes el directorio backups si no está creado.</span>
$ python manage.py dumpdata -o backups/datosbiblioteca.json
</code></pre></div><h2 id="instalación-y-configuración-de-docker-y-docker-compose">Instalación y configuración de docker y docker-compose</h2>
<p>Si trabajamos en linux o mac lo hacemos directametne en la mmáquina. Si trabajamos en Windows, usamos la máquina virtualbox que tenemos creada.</p>


<div class="pageinfo pageinfo-primary">
<p><strong>Documentación</strong></p>
<ul>
<li><a href="https://docs.docker.com/engine/install/">https://docs.docker.com/engine/install/</a></li>
<li><a href="https://docs.docker.com/compose/install/">https://docs.docker.com/compose/install/</a></li>
</ul>

</div>

<h3 id="instalación-de-docker">Instalación de docker</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ curl -fsSL https://get.docker.com -o get-docker.sh
$ <span style="color:#000">DRY_RUN</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">1</span> sh ./get-docker.sh

<span style="color:#8f5902;font-style:italic"># post instalación</span>
$ sudo groupadd docker
$ sudo usermod -aG docker <span style="color:#000">$USER</span>
$ newgrp docker 
</code></pre></div><p>Podemos comprobar que ha funcionado bien</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ docker run hello-world
</code></pre></div><h3 id="instalación-de-docker-compose">Instalación de docker-compose</h3>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ sudo curl -L <span style="color:#4e9a06">&#34;https://github.com/docker/compose/releases/download/1.29.2/docker-compose-</span><span style="color:#204a87;font-weight:bold">$(</span>uname -s<span style="color:#204a87;font-weight:bold">)</span><span style="color:#4e9a06">-</span><span style="color:#204a87;font-weight:bold">$(</span>uname -m<span style="color:#204a87;font-weight:bold">)</span><span style="color:#4e9a06">&#34;</span> -o /usr/local/bin/docker-compose
$ sudo chmod +x /usr/local/bin/docker-compose
</code></pre></div><p>Podemos comprobar que ha funcionado bien</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ docker-compose --version
</code></pre></div><h2 id="instalación-del-servico-de-postgresql">Instalación del servico de postgresql</h2>
<p>Este servicio lo instalamos en linux o en la máquina <strong>virtualbox</strong> si usas windows</p>
<p>En una carpeta de este linux creamos el siguiente archivo con los serviciios de postgresql y adminer.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#8f5902;font-style:italic"># docker-compose.yml</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">version</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#4e9a06">&#39;3.1&#39;</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline"></span><span style="color:#204a87;font-weight:bold">services</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">db</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">image</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">postgres:13.0-alpine</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">environment</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">POSTGRES_USER=django</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">POSTGRES_PASSWORD=password</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">POSTGRES_DB=biblioteca</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">volumes</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#000">./postgres_data:/var/lib/postgresql/data/</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">ports</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#0000cf;font-weight:bold">5432</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">5432</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">  </span><span style="color:#204a87;font-weight:bold">adminer</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">image</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline"> </span><span style="color:#000">adminer</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">    </span><span style="color:#204a87;font-weight:bold">ports</span><span style="color:#000;font-weight:bold">:</span><span style="color:#f8f8f8;text-decoration:underline">
</span><span style="color:#f8f8f8;text-decoration:underline">      </span>- <span style="color:#0000cf;font-weight:bold">8080</span><span style="color:#000;font-weight:bold">:</span><span style="color:#0000cf;font-weight:bold">8080</span><span style="color:#f8f8f8;text-decoration:underline">
</span></code></pre></div><p>En esa misma carpeta ejecutamos:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ docker-compose up -d
</code></pre></div><p>Y accedmos a la url del adminer: <code>http://localhost:8080</code> (o la ip de la máquina virtual si la estaś usando).</p>
<p>Podrás conectar con la base de datos seleccionando postgresql y el resto de datos.</p>
<h2 id="configuración-de-la-nueva-base-de-datos-en-django">Configuración de la nueva base de datos en django</h2>
<p>Como vamos a usar postgresql debemos instalar el cliente de python para postgresql en nuestra máquina.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ pip install psycopg2-binary
</code></pre></div><p>Y configuramos el archivo settings.py para que use postgresql.</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#000">DATABASES</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000;font-weight:bold">{</span>
    <span style="color:#4e9a06">&#39;default&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#4e9a06">&#39;ENGINE&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;django.db.backends.postgresql_psycopg2&#39;</span><span style="color:#000;font-weight:bold">,</span>
        <span style="color:#4e9a06">&#39;NAME&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;biblioteca&#39;</span><span style="color:#000;font-weight:bold">,</span>
        <span style="color:#4e9a06">&#39;USER&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;django&#39;</span><span style="color:#000;font-weight:bold">,</span>
        <span style="color:#4e9a06">&#39;PASSWORD&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;password&#39;</span><span style="color:#000;font-weight:bold">,</span>
        <span style="color:#4e9a06">&#39;HOST&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;localhost&#39;</span><span style="color:#000;font-weight:bold">,</span>
        <span style="color:#4e9a06">&#39;PORT&#39;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#39;5432&#39;</span><span style="color:#000;font-weight:bold">,</span>
    <span style="color:#000;font-weight:bold">}</span>
<span style="color:#000;font-weight:bold">}</span>

</code></pre></div><p>Si usas virutalbox tienes que poner la <strong>ip de virtualbox</strong> en el host.</p>
<h2 id="creación-de-la-estructura-de-la-base-de-datos-migraciones">Creación de la estructura de la base de datos (migraciones)</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ python manage.py migrate
</code></pre></div><h2 id="carga-de-los-datos-antiguos-de-sqlite">Carga de los datos antiguos de sqlite</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ python manage.py loaddata backups/datosbiblioteca.json
</code></pre></div><p>Y comprobamos que todo ha ido bien.  Deberíamos de tener nuestro proyecto django ejecutándose con la nueva base de datos postgresql. Recordad que el servidor de docker de postgresql tiene que estar ejecutándose.</p>
<h2 id="mejoras">Mejoras</h2>
<ul>
<li>Usar variables de entorno en <code>docker-compose.yml</code> y en <code>settings.py</code></li>
<li>Puedes usar un fichero <code>.env</code> para configurar las variables de entorno.</li>
</ul>

</div>



    
	
  

    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2021 @lmorillas Derechos reservados</small>
        <small class="ml-1"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">Política de privacidad</a></small>
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>


<script src="https://cdn.jsdelivr.net/npm/mermaid@8.11.2/dist/mermaid.min.js" integrity="sha384-m8Pdaep6Qk8sW3J6XhPOiwUww3maU9HxZTLvEfSEB4e1UVvTdHyfJsYmEfYqvwLC" crossorigin="anonymous"></script>



<style>
.markmap > svg {
  width: 100%;
  height: 300px;
}
</style>
<script>
window.markmap = {
  autoLoader: { manual: true },
};
</script>
<script src="https://cdn.jsdelivr.net/npm/markmap-autoloader"></script>


<script src='/dwes/js/tabpane-persist.js'></script>




 












<script src="/dwes/js/main.min.755a6d235852fb507b21b0e4afd9cb28fa18a9d04dfc195909285087a285702b.js" integrity="sha256-dVptI1hS&#43;1B7IbDkr9nLKPoYqdBN/BlZCShQh6KFcCs=" crossorigin="anonymous"></script>




  </body>
</html>
